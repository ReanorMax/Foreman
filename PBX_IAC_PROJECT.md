# ะัะพะตะบั PBX IAC (Infrastructure as Code)

ะะพะบัะผะตะฝัะฐัะธั ะฟะพ ะฟัะพะตะบัั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ PBX ะธะฝััะฐััััะบัััั ัะตัะตะท GitLab CI/CD.

---

## ๐ ะะฑัะฐั ะธะฝัะพัะผะฐัะธั

### ะัะพะตะบั

- **ะะฐะทะฒะฐะฝะธะต**: `Automatization/pbx-iac`
- **ะขะธะฟ**: Infrastructure as Code (IAC) ะดะปั PBX ัะธััะตะผ
- **Project ID**: `96`
- **GitLab URL**: `http://10.19.1.20/Automatization/pbx-iac` (ะทะฐะผะตะฝะธัะต ะฝะฐ IP ะฒะฐัะตะณะพ GitLab)
- **ะะตะฟะพะทะธัะพัะธะน**: `http://10.19.1.20/Automatization/pbx-iac.git`

### ะะฐะทะฝะฐัะตะฝะธะต

ะัะพะตะบั ะฟัะตะดะฝะฐะทะฝะฐัะตะฝ ะดะปั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ ัะฟัะฐะฒะปะตะฝะธั ะธ ัะฐะทะฒะตัััะฒะฐะฝะธั PBX (Private Branch Exchange) ะธะฝััะฐััััะบัััั ัะตัะตะท ะฟัะธะฝัะธะฟั Infrastructure as Code:
- ะะฒัะพะผะฐัะธัะตัะบะพะต ัะฐะทะฒะตัััะฒะฐะฝะธะต PBX ัะธััะตะผ
- ะฃะฟัะฐะฒะปะตะฝะธะต ะบะพะฝัะธะณััะฐัะธัะผะธ
- ะะตััะธะพะฝะธัะพะฒะฐะฝะธะต ะธะทะผะตะฝะตะฝะธะน
- ะะฒัะพะผะฐัะธัะตัะบะพะต ัะตััะธัะพะฒะฐะฝะธะต ะธ ะฒะฐะปะธะดะฐัะธั

---

## ๐ก ะัะพััะพะต ะฟะพะฝะธะผะฐะฝะธะต: ะะฐะบ ัะฐะฑะพัะฐะตั ะฟัะพะตะบั

### ะกััั ัะฐะฑะพัั (ะดะปั ะบะพะปะปะตะณะธ)

**ะะฐะถะฝะพ:** ะัะพะณัะฐะผะผะธัั ะะ ัะฐะฑะพัะฐะตั ะฝะฐะฟััะผัั ะฒ ะฟัะพะตะบัะต `pbx-iac`! ะัะพะณัะฐะผะผะธัั ัะฐะฑะพัะฐะตั ะฒ ะพัะดะตะปัะฝะพะผ ะฟัะพะตะบัะต `pbx/modul`, ะฐ `pbx-iac` ะฐะฒัะพะผะฐัะธัะตัะบะธ ะบะพะฟะธััะตั ะดะฐะฝะฝัะต ะธะท ะฝะตะณะพ.

**ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั ั ะฟัะพะตะบัะพะผ ะฟัะพะณัะฐะผะผะธััะฐ:**

1. **ะัะพะณัะฐะผะผะธัั ัะฐะฑะพัะฐะตั ะฒ ะฟัะพะตะบัะต `pbx/modul`** 
   - ะัะพะตะบั: `http://10.19.1.20/pbx/modul` (ะทะฐะผะตะฝะธัะต ะฝะฐ IP ะฒะฐัะตะณะพ GitLab)
   - ะะตัะบะฐ: `develop` (ะธะปะธ ะดััะณะฐั ะฒะตัะบะฐ ะฟัะพะณัะฐะผะผะธััะฐ)
   - Project ID: `6`

2. **ะัะพะณัะฐะผะผะธัั ะฒะฝะพัะธั ะธะทะผะตะฝะตะฝะธั** ะฒ ะฟัะพะตะบัะต `pbx/modul`:
   - ะะตะดะฐะบัะธััะตั PHP ัะฐะนะปั ะฒ `server/api/`
   - ะะตะดะฐะบัะธััะตั ัะฐะนะปั ะผะพะดะตะปะตะน ะฒ `server/models/`
   - ะะตะดะฐะบัะธััะตั ะบะปะธะตะฝััะบะธะต ัะฐะนะปั ะฒ `client/` (JS, TS, CSS)

3. **ะัะพะณัะฐะผะผะธัั ะดะตะปะฐะตั push ะฒ ะฒะตัะบั `develop`** ะฟัะพะตะบัะฐ `pbx/modul`
   - ะญัะพ ััะธะณะตัะธั (ะทะฐะฟััะบะฐะตั) ะฐะฒัะพะผะฐัะธัะตัะบะธะน ะฟัะพัะตัั ะฒ ะฟัะพะตะบัะต `pbx-iac`

4. **GitLab ะฐะบัะธะฒะธััะตั CI/CD Pipeline** ะฒ ะฟัะพะตะบัะต `pbx-iac`
   - ะกะพะทะดะฐะตััั ะทะฐะดะฐัะฐ (job) ะดะปั Runner'ะฐ



4.5. **Runner ะฟะพััะพัะฝะฝะพ ะพะฟัะฐัะธะฒะฐะตั GitLab** (polling ะผะตัะฐะฝะธะทะผ)
   - Runner ะฝะฐ ัะตัะฒะตัะต `10.19.1.108` ะฟะพััะพัะฝะฝะพ ะดะตะปะฐะตั ะทะฐะฟัะพัั ะบ GitLab: "Checking for jobs..."
   - ะญัะพ ะะ webhook - Runner ัะฐะผ ะฟะพััะพัะฝะฝะพ ัะฟัะฐัะธะฒะฐะตั GitLab ะตััั ะปะธ ะทะฐะดะฐัะธ
   - ะะพะณะดะฐ GitLab ะฒะธะดะธั ะฝะพะฒัั ะทะฐะดะฐัั ะดะปั ะฟัะพะตะบัะฐ `pbx-iac`, Runner ะฟะพะปััะฐะตั ะพัะฒะตั: "Checking for jobs... received"
   - ะัะพะตะบั `pbx-iac` ะฝะฐัััะพะตะฝ ะพััะปะตะถะธะฒะฐัั ะธะทะผะตะฝะตะฝะธั ะฒ ะฟัะพะตะบัะต `pbx/modul`

5. **Runner ะฝะฐ ัะตัะฒะตัะต `10.19.1.108` (pbx-iac-runner) ะฟะพะปััะฐะตั ะทะฐะดะฐัั**
   - Runner **ะะะะะะฃะะข ะดะฐะฝะฝัะต ะธะท ะฒะตัะบะธ `develop` ะฟัะพะตะบัะฐ `pbx/modul`**
   - ะัะฟะพะปัะทัะตั GitLab API ะดะปั ะฟะพะปััะตะฝะธั ัะฐะนะปะพะฒ ะธะท ะฟัะพะตะบัะฐ `pbx/modul`
   - ะกะบะฐัะธะฒะฐะตั ัะฐะนะปั ัะตัะตะท GitLab API (ะฝะต ัะตัะตะท git clone)

6. **Runner ะฟัะธะผะตะฝัะตั ะธะทะผะตะฝะตะฝะธั ะฝะฐ PBX ัะตัะฒะตัั**:
   - ะะพะฟะธััะตั ัะฐะนะปั ะธะท `server/api/` โ `/var/www/htdocs/api/` ะฝะฐ PBX ัะตัะฒะตัะฐั
   - ะะพะฟะธััะตั ัะฐะนะปั ะธะท `server/models/` โ `/var/www/htdocs/models/` ะฝะฐ PBX ัะตัะฒะตัะฐั
   - ะะพะฟะธััะตั ัะฐะนะปั ะธะท `client/` โ `/var/www/htdocs/client/` ะฝะฐ PBX ัะตัะฒะตัะฐั (ะตัะปะธ ะฒะบะปััะตะฝะพ)

7. **ะะตะทัะปััะฐั** - ะฟัะพะณัะฐะผะผะธัั ะฒะธะดะธั ะฒ GitLab (ะฟัะพะตะบั `pbx-iac`), ััะฟะตัะฝะพ ะปะธ ะฒัะต ะฟัะธะผะตะฝะธะปะพัั

### ะัะพัััะผะธ ัะปะพะฒะฐะผะธ (ั ะฐะบัะตะฝัะพะผ ะฝะฐ ะฟัะพะตะบั ะฟัะพะณัะฐะผะผะธััะฐ):

```
ะัะพะณัะฐะผะผะธัั ัะฐะฑะพัะฐะตั ะฒ ะะะะะะขะ pbx/modul (ะะ ะฒ pbx-iac!)
    โโ ะัะพะตะบั: http://10.19.1.20/pbx/modul
    โโ ะะตัะบะฐ: develop (ะธะปะธ ะดััะณะฐั)
    โโ ะะฝะพัะธั ะธะทะผะตะฝะตะฝะธั: PHP ัะฐะนะปั, ะผะพะดะตะปะธ, ะบะปะธะตะฝััะบะธะต ัะฐะนะปั
    โโ git push origin develop
    
    โ (ััะธะณะณะตั ะพั push ะฒ ะฟัะพะตะบั pbx/modul)

GitLab โ pbx-iac ะฟัะพะตะบั ะฐะบัะธะฒะธััะตััั
    โโ ะัะพะตะบั pbx-iac ะฝะฐัััะพะตะฝ ะพััะปะตะถะธะฒะฐัั pbx/modul
    โโ ะะฐะฟััะบะฐะตั CI/CD Pipeline ะฒ pbx-iac
    
    โ (ะฐะบัะธะฒะฐัะธั Runner)

GitLab โ Runner (pbx-iac-runner ะฝะฐ 10.19.1.108)
    โโ Runner ะฟะพะปััะฐะตั ะทะฐะดะฐัั ะพั pbx-iac ะฟัะพะตะบัะฐ
    โโ ะะะะะะฃะะข ะดะฐะฝะฝัะต ะธะท ะฒะตัะบะธ develop ะฟัะพะตะบัะฐ pbx/modul
    โโ ะัะฟะพะปัะทัะตั GitLab API ะดะปั ัะบะฐัะธะฒะฐะฝะธั ัะฐะนะปะพะฒ:
       โโ server/api/ โ ะบะพะฟะธััะตั PHP ัะฐะนะปั
       โโ server/models/ โ ะบะพะฟะธััะตั ะผะพะดะตะปะธ
       โโ client/ โ ะบะพะฟะธััะตั ะบะปะธะตะฝััะบะธะต ัะฐะนะปั (ะตัะปะธ ะฒะบะปััะตะฝะพ)
    
    โ (ะฟัะธะผะตะฝะตะฝะธะต ะฝะฐ PBX ัะตัะฒะตัั)

Runner โ PBX ัะตัะฒะตัั (ะฟัะธะผะตะฝัะตั ัะบะพะฟะธัะพะฒะฐะฝะฝัะต ะดะฐะฝะฝัะต)
    โโ ะะพะดะบะปััะฐะตััั ะบ PBX ัะตัะฒะตัะฐะผ (ัะตัะตะท Ansible)
    โโ ะะพะฟะธััะตั ัะฐะนะปั ะธะท pbx/modul ะฝะฐ ัะตัะฒะตัั:
    โ  โโ /var/www/htdocs/api/ (PHP ัะฐะนะปั)
    โ  โโ /var/www/htdocs/models/ (ะผะพะดะตะปะธ)
    โ  โโ /var/www/htdocs/client/ (ะบะปะธะตะฝััะบะธะต ัะฐะนะปั)
    โโ ะฃััะฐะฝะฐะฒะปะธะฒะฐะตั ะฟัะฐะฒะฐ ะดะพัััะฟะฐ
    
    โ

ะะตะทัะปััะฐั โ GitLab (ะฟะพะบะฐะทัะฒะฐะตั ััะฐััั ะฒ pbx-iac ะฟัะพะตะบัะต)
```

### ะะปััะตะฒัะต ะผะพะผะตะฝัั:

- **ะัะพะณัะฐะผะผะธัั ัะฐะฑะพัะฐะตั ะฒ ะะขะะะะฌะะะ ะฟัะพะตะบัะต `pbx/modul`** - ะะ ะฒ ะฟัะพะตะบัะต `pbx-iac`!
- **ะัะพะตะบั ะฟัะพะณัะฐะผะผะธััะฐ**: `http://10.19.1.20/pbx/modul` (Project ID: 6)
- **ะะตัะบะฐ ะฟัะพะณัะฐะผะผะธััะฐ**: `develop` (ะธะปะธ ะดััะณะฐั ะฒะตัะบะฐ, ะฝะฐัััะฐะธะฒะฐะตััั)
- **Push ะฒ ะฟัะพะตะบั `pbx/modul` ััะธะณะตัะธั ะฟัะพัะตัั** - ะบะฐะบ ัะพะปัะบะพ ะฟัะพะณัะฐะผะผะธัั ะดะตะปะฐะตั push ะฒ ะฟัะพะตะบั `pbx/modul`, ะทะฐะฟััะบะฐะตััั ะฐะฒัะพะผะฐัะธะบะฐ ะฒ ะฟัะพะตะบัะต `pbx-iac`
- **Runner ะะะะะะฃะะข ะธะท ะฟัะพะตะบัะฐ `pbx/modul`** - Runner ะฝะฐ ัะตัะฒะตัะต `10.19.1.108` (pbx-iac-runner) ะบะพะฟะธััะตั ัะฐะนะปั ะธะท ะฟัะพะตะบัะฐ `pbx/modul` ัะตัะตะท GitLab API
- **ะะพะฟะธัะพะฒะฐะฝะธะต ัะตัะตะท GitLab API** - Runner ะฝะต ะดะตะปะฐะตั git clone, ะฐ ัะบะฐัะธะฒะฐะตั ัะฐะนะปั ัะตัะตะท GitLab API ะฟะพ ะฟััะธ `server/api/`, `server/models/`, `client/`
- **ะัะธะผะตะฝะตะฝะธะต ะฝะฐ PBX** - ัะบะพะฟะธัะพะฒะฐะฝะฝัะต ัะฐะนะปั ะฟัะธะผะตะฝััััั ะฝะฐ PBX ัะตัะฒะตัั ัะตัะตะท Ansible:
  - `server/api/` โ `/var/www/htdocs/api/` ะฝะฐ PBX ัะตัะฒะตัะฐั
  - `server/models/` โ `/var/www/htdocs/models/` ะฝะฐ PBX ัะตัะฒะตัะฐั
  - `client/` โ `/var/www/htdocs/client/` ะฝะฐ PBX ัะตัะฒะตัะฐั (ะตัะปะธ ะฒะบะปััะตะฝะพ)
- **ะัะพะณัะฐะผะผะธัั ะะ ะธะผะตะตั ะฟััะผะพะณะพ ะดะพัััะฟะฐ ะบ PBX ัะตัะฒะตัะฐะผ** - ัะฐะฑะพัะฐะตั ัะพะปัะบะพ ัะตัะตะท GitLab ะฒ ะฟัะพะตะบัะต `pbx/modul`
- **Runner ะฝะฐ ัะตัะฒะตัะต 10.19.1.108** - ััะพ `pbx-iac-runner`, ะพะฝ ะดะตะปะฐะตั ะฒัั ัะฐะฑะพัั ะบะพะฟะธัะพะฒะฐะฝะธั ะธ ะฟัะธะผะตะฝะตะฝะธั ัะตัะตะท Ansible playbook `sync_pbx_modul.yml`

### ะะดะต ัะผะพััะตัั:

- **ะัะพะตะบั ะฒ GitLab**: `http://10.19.1.20/Automatization/pbx-iac` (ะทะฐะผะตะฝะธัะต ะฝะฐ IP ะฒะฐัะตะณะพ GitLab)
- **ะะตัะบะธ ะฟัะพะณัะฐะผะผะธััะพะฒ**: GitLab โ ะัะพะตะบั โ Repository โ Branches
- **ะะตะทัะปััะฐัั ัะฐะฑะพัั**: GitLab โ ะัะพะตะบั โ CI/CD โ Pipelines (ะฒะธะดะฝะพ ะธะท ะบะฐะบะพะน ะฒะตัะบะธ ะทะฐะฟััะบะฐะปัั)
- **ะะพะณะธ Runner'ะฐ**: ะกะผ. ัะฐะทะดะตะป "ะะพะฝะธัะพัะธะฝะณ" ะฝะธะถะต

### ะงัะพ ะฝัะถะฝะพ ะฟะพะฝะธะผะฐัั:

- **ะัะพะณัะฐะผะผะธัั ัะฐะฑะพัะฐะตั ะฒ ะฟัะพะตะบัะต `pbx/modul`** (`http://10.19.1.20/pbx/modul`)
- **ะัะพะตะบั `pbx-iac`** ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพััะปะตะถะธะฒะฐะตั ะธะทะผะตะฝะตะฝะธั ะฒ ะฟัะพะตะบัะต `pbx/modul`
- ะะพะณะดะฐ ะฟัะพะณัะฐะผะผะธัั ะดะตะปะฐะตั **push ะฒ ะฟัะพะตะบั `pbx/modul`** (ะฒ ะฒะตัะบั `develop`) - ััะพ ััะธะณะตัะธั ะฐะฒัะพะผะฐัะธัะตัะบะพะต ะบะพะฟะธัะพะฒะฐะฝะธะต ะธ ัะฐะทะฒะตัััะฒะฐะฝะธะต ัะตัะตะท ะฟัะพะตะบั `pbx-iac`
- **Runner ะฝะฐ ัะตัะฒะตัะต 10.19.1.108** (pbx-iac-runner) ะบะพะฟะธััะตั ัะฐะนะปั ะธะท ะฟัะพะตะบัะฐ `pbx/modul` ัะตัะตะท GitLab API ะธ ะฟัะธะผะตะฝัะตั ะธั ะฝะฐ PBX ัะตัะฒะตัะฐั
- **ะคะฐะนะปั ะบะพะฟะธัััััั ะธะท ะฒะตัะบะธ `develop` ะฟัะพะตะบัะฐ `pbx/modul`** ะฒ ะดะธัะตะบัะพัะธะธ:
  - `server/api/` โ `/var/www/htdocs/api/` (PHP ัะฐะนะปั)
  - `server/models/` โ `/var/www/htdocs/models/` (ะผะพะดะตะปะธ)
  - `client/` โ `/var/www/htdocs/client/` (ะบะปะธะตะฝััะบะธะต ัะฐะนะปั)
- ะัั ะดะพะบัะผะตะฝัะฐัะธั ะฟะพ ะฟัะพะตะบัั ะฝะฐัะพะดะธััั **ะฒ ัะฐะผะพะผ ัะตะฟะพะทะธัะพัะธะธ GitLab** (README.md ะธ ะดััะณะธะต ัะฐะนะปั)

---

## ๐ฏ ะัะพััะพะต ะพะฑัััะฝะตะฝะธะต: ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั

### ะงัะพ ะดะตะปะฐะตั ััะพั ะฟัะพะตะบั?

ะัะพะณัะฐะผะผะธัั ะฒะฝะพัะธั ะธะทะผะตะฝะตะฝะธั ะฒ ะบะพะด (ะบะพะฝัะธะณััะฐัะธะธ PBX, ัะบัะธะฟัั, ะฝะฐัััะพะนะบะธ) ะฒ GitLab ัะตะฟะพะทะธัะพัะธะน. GitLab Runner ะฐะฒัะพะผะฐัะธัะตัะบะธ "ะฟะพะดะปะธะฒะฐะตั" (ัะฐะทะฒะตัััะฒะฐะตั) ััะธ ะดะฐะฝะฝัะต ะฝะฐ PBX ัะตัะฒะตัั.

### ะัะพัะตัั ัะฐะฑะพัั (ั ะฐะบัะตะฝัะพะผ ะฝะฐ ะฒะตัะบะธ ะฟัะพะณัะฐะผะผะธััะฐ):

```
1. ะะะะะะะะะะกะข ัะฐะฑะพัะฐะตั ะฒ ะกะะะะ ะะะขะะ ะฒ GitLab
   โโ ะัะบััะฒะฐะตั ะฟัะพะตะบั: http://10.19.1.20/Automatization/pbx-iac
   โโ ะกะพะทะดะฐะตั ัะฒะพั ะฒะตัะบั (ะฝะฐะฟัะธะผะตั: feature/ะฟัะพะณัะฐะผะผะธัั-ะธะผั ะธะปะธ dev/ะฟัะพะณัะฐะผะผะธัั)
   โโ ะะฝะพัะธั ะธะทะผะตะฝะตะฝะธั (ัะตะดะฐะบัะธััะตั ัะฐะนะปั ะบะพะฝัะธะณััะฐัะธะน) ะฒ ะกะะะะ ะะะขะะ
   โโ ะกะพััะฐะฝัะตั ะธะทะผะตะฝะตะฝะธั (ะดะตะปะฐะตั commit)
   โโ ะะฐะณััะถะฐะตั ะฒ GitLab (git push origin ะกะะะฏ_ะะะขะะ)
       โโ โ๏ธ ะญะขะ ะขะะะะะะะข ะะะะฆะะกะก! Push ะฒ ะฒะตัะบั ะทะฐะฟััะบะฐะตั ะฐะฒัะพะผะฐัะธะบั

2. GITLAB ะฟะพะปััะฐะตั push ะฒ ะฒะตัะบั ะฟัะพะณัะฐะผะผะธััะฐ
   โโ ะะธะดะธั ััะพ ะฟัะพะณัะฐะผะผะธัั ัะดะตะปะฐะป push ะฒ ัะฒะพั ะฒะตัะบั
   โโ ะะบัะธะฒะธััะตั ะฐะฒัะพะผะฐัะธัะตัะบะธะน ะฟัะพัะตัั (CI/CD Pipeline)
   โโ ะะฟัะตะดะตะปัะตั ะธะท ะบะฐะบะพะน ะฒะตัะบะธ ะฑัะป push
   โโ ะะพะฒะพัะธั Runner'ั: "ะัะพะณัะฐะผะผะธัั ัะดะตะปะฐะป push ะฒ ะฒะตัะบั X, ะบะพะฟะธััะน ะธ ะฟัะธะผะตะฝัะน!"

3. RUNNER (pbx-iac-runner ะฝะฐ ัะตัะฒะตัะต 10.19.1.108)
   โโ ะะพะปััะฐะตั ะบะพะผะฐะฝะดั ะพั GitLab ั ัะบะฐะทะฐะฝะธะตะผ ะะะขะะ ะฟัะพะณัะฐะผะผะธััะฐ
   โโ ะะะะะะฃะะข ะดะฐะฝะฝัะต ะธะท ะะะขะะ ะฟัะพะณัะฐะผะผะธััะฐ (git clone/checkout ะบะพะฝะบัะตัะฝะพะน ะฒะตัะบะธ)
   โโ ะัะพะฒะตััะตั ััะพ ะฒัะต ะฟัะฐะฒะธะปัะฝะพ (ะฒะฐะปะธะดะฐัะธั)
   โโ ะัะธะผะตะฝัะตั ะธะทะผะตะฝะตะฝะธั ะบ PBX ัะตัะฒะตัะฐะผ
      โโ ะะพะดะบะปััะฐะตััั ะบ PBX ัะตัะฒะตัะฐะผ
      โโ ะะฑะฝะพะฒะปัะตั ะบะพะฝัะธะณััะฐัะธะธ ะดะฐะฝะฝัะผะธ ะธะท ะฒะตัะบะธ ะฟัะพะณัะฐะผะผะธััะฐ
      โโ ะัะธะผะตะฝัะตั ะฝะพะฒัะต ะฝะฐัััะพะนะบะธ
      โโ ะัะพะฒะตััะตั ััะพ ะฒัะต ัะฐะฑะพัะฐะตั

4. ะะะะฃะะฌะขะะข
   โโ ะัะพะณัะฐะผะผะธัั ะฒะธะดะธั ััะฐััั ะฒ GitLab (ััะฟะตัะฝะพ/ะพัะธะฑะบะฐ) ะดะปั ัะฒะพะตะน ะฒะตัะบะธ
   โโ PBX ัะตัะฒะตัั ะพะฑะฝะพะฒะปะตะฝั ั ะดะฐะฝะฝัะผะธ ะธะท ะฒะตัะบะธ ะฟัะพะณัะฐะผะผะธััะฐ
   โโ ะัะต ะธะทะผะตะฝะตะฝะธั ะทะฐัะธะบัะธัะพะฒะฐะฝั ะฒ ะธััะพัะธะธ GitLab (ะฒะธะดะฝะพ ะธะท ะบะฐะบะพะน ะฒะตัะบะธ ะฑัะปะพ ัะฐะทะฒะตัััะฒะฐะฝะธะต)
```

### ะะปััะตะฒัะต ะผะพะผะตะฝัั:

1. **ะัะพะณัะฐะผะผะธัั ะะ ะปะตะทะตั ะฝะฐะฟััะผัั ะฒ PBX ัะตัะฒะตัั** - ะพะฝ ัะฐะฑะพัะฐะตั ัะพะปัะบะพ ะฒ GitLab
2. **Runner ะดะตะปะฐะตั ะฒัั "ะณััะทะฝัั ัะฐะฑะพัั"** - ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะพะดะบะปััะฐะตััั ะบ ัะตัะฒะตัะฐะผ ะธ ะฟัะธะผะตะฝัะตั ะธะทะผะตะฝะตะฝะธั
3. **ะัะต ะธะทะผะตะฝะตะฝะธั ะฒะตััะธะพะฝะธัััััั** - ะผะพะถะฝะพ ะฟะพัะผะพััะตัั ััะพ ะธ ะบะพะณะดะฐ ะผะตะฝัะปะพัั
4. **ะะฒัะพะผะฐัะธัะตัะบะฐั ะฟัะพะฒะตัะบะฐ** - ะตัะปะธ ััะพ-ัะพ ะฝะต ัะฐะบ, ะธะทะผะตะฝะตะฝะธั ะฝะต ะฟัะธะผะตะฝัััั

### ะะพัะตะผั ัะฐะบ ัะดะตะปะฐะฝะพ?

- **ะะตะทะพะฟะฐัะฝะพััั**: ะัะพะณัะฐะผะผะธัั ะฝะต ะธะผะตะตั ะฟััะผะพะณะพ ะดะพัััะฟะฐ ะบ PBX ัะตัะฒะตัะฐะผ
- **ะะพะฝััะพะปั**: ะัะต ะธะทะผะตะฝะตะฝะธั ะฒะธะดะฝั ะฒ GitLab, ะตััั ะธััะพัะธั
- **ะะฒัะพะผะฐัะธะทะฐัะธั**: ะะต ะฝัะถะฝะพ ะฒัััะฝัั ะฟะพะดะบะปััะฐัััั ะบ ะบะฐะถะดะพะผั ัะตัะฒะตัั
- **ะะฐะดะตะถะฝะพััั**: ะะฒัะพะผะฐัะธัะตัะบะฐั ะฟัะพะฒะตัะบะฐ ะฟะตัะตะด ะฟัะธะผะตะฝะตะฝะธะตะผ

---

## ๐ GitLab Runner

### pbx-iac-runner

- **Runner ID**: `15`
- **ะะผั**: `pbx-iac-runner`
- **ะขะพะบะตะฝ**: `YOUR_TOKEN_HERE` (ะฒ ัะตะฐะปัะฝะพะน ะบะพะฝัะธะณััะฐัะธะธ: `s26Ffck-UJny--FV5e1V`)
- **Executor**: `docker`
- **Docker Image**: `alpine:latest` (ะฟะพ ัะผะพะปัะฐะฝะธั)
- **Privileged**: `true` (ะฟัะธะฒะธะปะตะณะธัะพะฒะฐะฝะฝัะน ัะตะถะธะผ)
- **ะะฐัะตะณะธัััะธัะพะฒะฐะฝ**: 09.10.2025
- **ะกัะฐััั**: ะะบัะธะฒะตะฝ ะธ ัะฐะฑะพัะฐะตั

### ะะพะฝัะธะณััะฐัะธั Runner'ะฐ

**ะคะฐะนะป**: `/etc/gitlab-runner/config.toml`

```toml
[[runners]]
  name = "pbx-iac-runner"
  url = "http://10.19.1.20"     # URL GitLab ัะตัะฒะตัะฐ
  id = 15
  token = "YOUR_TOKEN_HERE"       # โ๏ธ ะะะะะะะขะ ะฝะฐ ัะตะฐะปัะฝัะน ัะพะบะตะฝ!
  executor = "docker"
  [runners.docker]
    tls_verify = false
    image = "alpine:latest"       # ะะฑัะฐะท ะฟะพ ัะผะพะปัะฐะฝะธั
    privileged = true             # ะัะธะฒะธะปะตะณะธัะพะฒะฐะฝะฝัะน ัะตะถะธะผ
    volumes = ["/var/run/docker.sock:/var/run/docker.sock", "/cache"]
    pull_policy = ["if-not-present"]
```

---

## ๐ ะกัะตะผะฐ ัะฐะฑะพัั ะฟัะพะตะบัะฐ

### ะะฑัะฐั ะฐััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        ะะะะะะะะขะงะะ                               โ
โ                                                                  โ
โ  1. ะะฝะพัะธั ะธะทะผะตะฝะตะฝะธั ะฒ ะบะพะด                                      โ
โ  2. ะะตะปะฐะตั commit                                               โ
โ  3. ะะตะปะฐะตั push ะฒ GitLab                                        โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โ git push
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      GITLAB ะกะะะะะ                               โ
โ                  (10.19.1.20)                                  โ
โ                                                                  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ  ะัะพะตะบั: Automatization/pbx-iac                          โ  โ
โ  โ  โข ะะพะด ะฟัะพะตะบัะฐ                                            โ  โ
โ  โ  โข .gitlab-ci.yml (CI/CD ะบะพะฝัะธะณััะฐัะธั)                   โ  โ
โ  โ  โข Ansible playbooks / Terraform / ะััะณะธะต IAC ะธะฝััััะผะตะฝััโ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                       โ                                          โ
โ                       โ Trigger Pipeline                         โ
โ                       โผ                                          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ  GitLab CI/CD Pipeline                                    โ  โ
โ  โ  โข ะะฟัะตะดะตะปัะตั ะทะฐะดะฐัะธ (jobs)                               โ  โ
โ  โ  โข ะะฐะทะฝะฐัะฐะตั runner ะดะปั ะฒัะฟะพะปะฝะตะฝะธั                        โ  โ
โ  โ  โข ะัะฟัะฐะฒะปัะตั ะทะฐะดะฐัะธ ะฒ Runner                             โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                          โ
                          โ CI/CD Jobs
                          โ (ัะตัะตะท GitLab API)
                          โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                 GITLAB RUNNER ะกะะะะะ                             โ
โ                 (10.19.1.108)                                  โ
โ                                                                  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ  pbx-iac-runner (ID: 15)                                  โ  โ
โ  โ  โข ะะพะปััะฐะตั ะทะฐะดะฐัะธ ะพั GitLab                              โ  โ
โ  โ  โข ะัะฟะพะปะฝัะตั ะทะฐะดะฐัะธ ะฒ Docker ะบะพะฝัะตะนะฝะตัะฐั                  โ  โ
โ  โ  โข ะัะฟัะฐะฒะปัะตั ัะตะทัะปััะฐัั ะพะฑัะฐัะฝะพ ะฒ GitLab                 โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                         โ                                        โ
โ                         โ Docker Executor                        โ
โ                         โผ                                        โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ  Docker Container (alpine:latest)                         โ  โ
โ  โ  โข ะัะฟะพะปะฝัะตั CI/CD ะทะฐะดะฐัะธ                                 โ  โ
โ  โ  โข ะะฐะฟััะบะฐะตั Ansible playbooks                            โ  โ
โ  โ  โข ะัะฟะพะปะฝัะตั ัะบัะธะฟัั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ                        โ  โ
โ  โ  โข ะัะธะผะตะฝัะตั ะธะทะผะตะฝะตะฝะธั ะบ PBX ัะธััะตะผะฐะผ                     โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                          โ
                          โ SSH / API / ะััะณะธะต ะฟัะพัะพะบะพะปั
                          โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    PBX ะกะะกะขะะะซ                                   โ
โ                                                                  โ
โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ         โ
โ  โ  PBX Server  โ  โ  PBX Server  โ  โ  PBX Server  โ  ...    โ
โ  โ      #1      โ  โ      #2      โ  โ      #3      โ         โ
โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ         โ
โ                                                                  โ
โ  โข ะะพะฝัะธะณััะฐัะธะธ ะพะฑะฝะพะฒะปััััั ะฐะฒัะพะผะฐัะธัะตัะบะธ                       โ
โ  โข ะะทะผะตะฝะตะฝะธั ะพััะปะตะถะธะฒะฐัััั ัะตัะตะท ะฒะตััะธะพะฝะธัะพะฒะฐะฝะธะต                โ
โ  โข ะกะพััะพัะฝะธะต ะธะฝััะฐััััะบัััั ัะฟัะฐะฒะปัะตััั ะบะพะดะพะผ                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะะพัะปะตะดะพะฒะฐัะตะปัะฝะพััั ะฒัะฟะพะปะฝะตะฝะธั ะทะฐะดะฐัะธ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ะะะะฆะะกะก ะะซะะะะะะะะฏ                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

1. ะะะะะะะะขะงะะ
   โโ ะะฝะพัะธั ะธะทะผะตะฝะตะฝะธั ะฒ ะบะพะด
   โโ ะะตะปะฐะตั commit
   โโ git push origin main

2. GITLAB
   โโ ะะพะปััะฐะตั push
   โโ ะะฐััะธั .gitlab-ci.yml
   โโ ะกะพะทะดะฐะตั Pipeline
   โโ ะัะฟัะฐะฒะปัะตั ะทะฐะดะฐัะธ (jobs) ะฒ Runner

3. RUNNER (pbx-iac-runner)
   โโ ะะพะปััะฐะตั ะทะฐะดะฐัั ะพั GitLab
   โ  โโ "Checking for jobs... received"
   โโ ะะพะฑะฐะฒะปัะตั ะฒ ะพัะตัะตะดั
   โ  โโ "Added job to processing list"
   โโ ะกะพะทะดะฐะตั Docker ะบะพะฝัะตะนะฝะตั
   โ  โโ ะัะฟะพะปัะทัะตั ะพะฑัะฐะท alpine:latest
   โโ ะะปะพะฝะธััะตั ัะตะฟะพะทะธัะพัะธะน ะฒ ะบะพะฝัะตะนะฝะตั
   โโ ะัะฟะพะปะฝัะตั ะทะฐะดะฐัะธ ะธะท .gitlab-ci.yml
   โ  โโ Validate (ะฟัะพะฒะตัะบะฐ ะบะพะฝัะธะณััะฐัะธะธ)
   โ  โโ Build (ัะฑะพัะบะฐ ะฐััะตัะฐะบัะพะฒ)
   โ  โโ Deploy (ัะฐะทะฒะตัััะฒะฐะฝะธะต ะฝะฐ PBX)
   โ  โโ Test (ัะตััะธัะพะฒะฐะฝะธะต)
   โโ ะัะฟัะฐะฒะปัะตั ะปะพะณะธ ะฒ GitLab
   โ  โโ "Appending trace to coordinator...ok"
   โโ ะะฐะฒะตััะฐะตั ะทะฐะดะฐัั
      โโ "Removed job from processing list"

4. GITLAB
   โโ ะะพะปััะฐะตั ัะตะทัะปััะฐัั
   โโ ะะฑะฝะพะฒะปัะตั ััะฐััั Pipeline
   โโ ะัะพะฑัะฐะถะฐะตั ัะตะทัะปััะฐัั ะฒ ะฒะตะฑ-ะธะฝัะตััะตะนัะต

5. ะะะะะะะะขะงะะ
   โโ ะะธะดะธั ัะตะทัะปััะฐัั ะฒ GitLab โ CI/CD โ Pipelines
```

---

## ๐ ะกัะฐัะธััะธะบะฐ ะฒัะฟะพะปะฝะตะฝะธั

### ะะพัะปะตะดะฝะธะต ะทะฐะดะฐัะธ

- **ะะพัะปะตะดะฝัั ะทะฐะดะฐัะฐ**: Job #2829
- **ะะฐัะฐ ะฒัะฟะพะปะฝะตะฝะธั**: 17.11.2025
- **ะะปะธัะตะปัะฝะพััั**: ~20 ัะตะบัะฝะด
- **ะกัะฐััั**: โ ะฃัะฟะตัะฝะพ ะฒัะฟะพะปะฝะตะฝะฐ
- **Runner**: `pbx-iac-runner` (ID: 15)

### ะะพะณะธ ะฒัะฟะพะปะฝะตะฝะธั

```
Nov 17 14:55:18 Checking for jobs... received
                job=2829 repo_url=http://10.19.1.20/Automatization/pbx-iac.git
                runner=s26Ffck-U

Nov 17 14:55:18 Added job to processing list
                builds=1 job=2829 max_builds=1 project=96

Nov 17 14:55:38 Removed job from processing list
                duration_s=19.538338541999998
                job=2829 project=96 runner=s26Ffck-U
```

**ะะฝะฐะปะธะท:**
- ะะฐะดะฐัะฐ ะฒัะฟะพะปะฝะตะฝะฐ ััะฟะตัะฝะพ (ะฝะตั ะพัะธะฑะพะบ ะฒ ะปะพะณะฐั)
- ะัะตะผั ะฒัะฟะพะปะฝะตะฝะธั: ~20 ัะตะบัะฝะด (ะฑััััะฐั ะทะฐะดะฐัะฐ)
- Runner ะบะพััะตะบัะฝะพ ะพะฑัะฐะฑะพัะฐะป ะทะฐะดะฐัั

---

## ๐ง ะะพะฝัะธะณััะฐัะธั ะฟัะพะตะบัะฐ ะธ ัะบัะธะฟัั ะบะพะฟะธัะพะฒะฐะฝะธั

### ะคะฐะนะป CI/CD: `.gitlab-ci.yml`

ะัะพะตะบั ะธัะฟะพะปัะทัะตั GitLab CI/CD ะดะปั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ. ะะพะฝัะธะณััะฐัะธั ะพะฟัะตะดะตะปัะตััั ะฒ ัะฐะนะปะต `.gitlab-ci.yml` ะฒ ะบะพัะฝะต ัะตะฟะพะทะธัะพัะธั ะฟัะพะตะบัะฐ `pbx-iac`.

**ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั:**

1. ะะพะณะดะฐ ะฟัะพะณัะฐะผะผะธัั ะดะตะปะฐะตั push ะฒ ะฟัะพะตะบั `pbx/modul`, GitLab ัะพะทะดะฐะตั pipeline ะฒ ะฟัะพะตะบัะต `pbx-iac`
2. Pipeline ะทะฐะฟััะบะฐะตั ะทะฐะดะฐัะธ (jobs), ะบะพัะพััะต ะฒัะฟะพะปะฝััััั ะฝะฐ runner'ะต `pbx-iac-runner`
3. Runner ะฒัะฟะพะปะฝัะตั Ansible playbook ะดะปั ัะธะฝััะพะฝะธะทะฐัะธะธ ะดะฐะฝะฝัั

**ะขะธะฟะธัะฝะฐั ััััะบัััะฐ `.gitlab-ci.yml` ะดะปั ะฟัะพะตะบัะฐ `pbx-iac`:**

```yaml
# ะัะธะผะตัะฝะฐั ััััะบัััะฐ .gitlab-ci.yml ะดะปั pbx-iac ะฟัะพะตะบัะฐ

stages:
  - sync      # ะกะธะฝััะพะฝะธะทะฐัะธั ะดะฐะฝะฝัั ะธะท pbx/modul

variables:
  ANSIBLE_HOST_KEY_CHECKING: "False"
  GITLAB_API_URL: "http://10.19.1.20"

# ะกะธะฝััะพะฝะธะทะฐัะธั PBX ะผะพะดัะปะตะน
sync_pbx_modules:
  stage: sync
  tags:
    - pbx-iac-runner    # ะัะฟะพะปัะทัะตั ัะฟะตัะธัะธัะฝัะน runner
  script:
    - echo "๐ Starting PBX Modul Sync..."
    - ansible-playbook -i inventory sync_pbx_modul.yml
    - echo "โ PBX Modul Sync completed"
  only:
    - main          # ะะฐะฟััะบะฐะตััั ะฟัะธ ะธะทะผะตะฝะตะฝะธัั ะฒ main ะฒะตัะบะต pbx-iac
    - develop       # ะะปะธ develop ะฒะตัะบะต
```

**ะัะธะผะตัะฐะฝะธะต:** ะะตะฐะปัะฝะฐั ะบะพะฝัะธะณััะฐัะธั ะผะพะถะตั ะพัะปะธัะฐัััั, ะฝะพ ะปะพะณะธะบะฐ ะฐะฝะฐะปะพะณะธัะฝะฐ.

---

### ะกะบัะธะฟั ะบะพะฟะธัะพะฒะฐะฝะธั: Ansible Playbook `sync_pbx_modul.yml`

**ะะฐัะฟะพะปะพะถะตะฝะธะต:** ะ ะฟัะพะตะบัะต `pbx-iac` (ะธะปะธ ะฒ ะฟัะพะตะบัะต `ansible`)

**ะงัะพ ะดะตะปะฐะตั:**
ะญัะพั playbook ะทะฐะฟััะบะฐะตั ัะธะฝััะพะฝะธะทะฐัะธั ัะฐะนะปะพะฒ ะธะท ะฟัะพะตะบัะฐ `pbx/modul` ะฝะฐ PBX ัะตัะฒะตัั.

**ะะพะปะฝะพะต ัะพะดะตัะถะธะผะพะต:**

```yaml
---
- name: "๐ PBX Modul Sync - Automatic Updates"
  hosts: clients_nodocker
  become: yes
  gather_facts: yes
  
  vars:
    # ะะตัะตะพะฟัะตะดะตะปัะตะผ ะฟััะธ ะดะปั ะฟัะพะดะฐะบัะฝ ะธัะฟะพะปัะทะพะฒะฐะฝะธั
    pbx_modul_api_target: "/var/www/htdocs/api"
    pbx_modul_client_target: "/var/www/htdocs/client"
    pbx_modul_state_dir: "/opt/pbx_modul_sync"
    pbx_modul_owner: "daemon"
    pbx_modul_group: "daemon"
    pbx_modul_mode: "0644"
  
  roles:
    - pbx_modul_sync
  
  handlers:
    - name: "๐ Sync completed notification"
      debug:
        msg: "โ PBX Modul sync completed on {{ inventory_hostname }}"
```

**ะะฐะบ ัะฐะฑะพัะฐะตั:**

1. **ะะฐะฟััะบะฐะตััั ะฝะฐ ัะพััะฐั** ะธะท ะณััะฟะฟั `clients_nodocker` (ััะพ PBX ัะตัะฒะตัั)
2. **ะัะฟะพะปัะทัะตั ัะพะปั** `pbx_modul_sync` ะดะปั ะฒัะฟะพะปะฝะตะฝะธั ัะธะฝััะพะฝะธะทะฐัะธะธ
3. **ะะฐัััะฐะธะฒะฐะตั ะฟััะธ** ะบัะดะฐ ะบะพะฟะธัะพะฒะฐัั ัะฐะนะปั ะฝะฐ PBX ัะตัะฒะตัะฐั:
   - API ัะฐะนะปั โ `/var/www/htdocs/api`
   - Client ัะฐะนะปั โ `/var/www/htdocs/client`
   - State ัะฐะนะป โ `/opt/pbx_modul_sync`

---

### ะะพะปั Ansible: `pbx_modul_sync`

**ะะฐัะฟะพะปะพะถะตะฝะธะต:** `roles/pbx_modul_sync/` ะฒ ะฟัะพะตะบัะต `pbx-iac` (ะธะปะธ `ansible`)

**ะกัััะบัััะฐ ัะพะปะธ:**

```
roles/pbx_modul_sync/
โโโ defaults/main.yml      # ะะพะฝัะธะณััะฐัะธั ะฟะพ ัะผะพะปัะฐะฝะธั
โโโ tasks/
โ   โโโ main.yml           # ะัะฝะพะฒะฝะพะน ัะฐะนะป ะทะฐะดะฐั
โ   โโโ sync_api.yml       # ะกะธะฝััะพะฝะธะทะฐัะธั API ัะฐะนะปะพะฒ
โ   โโโ sync_client.yml    # ะกะธะฝััะพะฝะธะทะฐัะธั ะบะปะธะตะฝััะบะธั ัะฐะนะปะพะฒ
โ   โโโ sync_models.yml    # ะกะธะฝััะพะฝะธะทะฐัะธั ะผะพะดะตะปะตะน
```

---

### ะะพะฝัะธะณััะฐัะธั ัะพะปะธ: `defaults/main.yml`

**ะงัะพ ัะพะดะตัะถะธั:**

```yaml
# PBX Modul Sync Configuration

# Enable/disable sync
pbx_modul_sync_enabled: true

# GitLab settings
pbx_modul_gitlab_api: "{{ gitlab_api_url }}"        # http://10.19.1.20
pbx_modul_project_id: "6"                           # Project ID ะฟัะพะตะบัะฐ pbx/modul
pbx_modul_branch: "develop"                         # ะะตัะบะฐ ะธะท ะบะพัะพัะพะน ะบะพะฟะธัะพะฒะฐัั
pbx_modul_token: "YOUR_GITLAB_API_TOKEN_HERE"      # โ๏ธ ะะะะะะะขะ ะฝะฐ ัะตะฐะปัะฝัะน GitLab API ัะพะบะตะฝ!

# Source paths in GitLab (ะฒ ะฟัะพะตะบัะต pbx/modul)
pbx_modul_api_source: "server/api"                  # ะััั ะบ API ัะฐะนะปะฐะผ ะฒ GitLab
pbx_modul_models_source: "server/models"            # ะััั ะบ ะผะพะดะตะปัะผ ะฒ GitLab
pbx_modul_client_source: "client"                   # ะััั ะบ ะบะปะธะตะฝััะบะธะผ ัะฐะนะปะฐะผ ะฒ GitLab

# Target paths on PBX server (ะบัะดะฐ ะบะพะฟะธัะพะฒะฐัั ะฝะฐ ัะตัะฒะตัะต)
pbx_modul_api_target: "/var/www/htdocs/api"         # ะฆะตะปะตะฒะพะน ะฟััั ะดะปั API
pbx_modul_models_target: "/var/www/htdocs/models"   # ะฆะตะปะตะฒะพะน ะฟััั ะดะปั ะผะพะดะตะปะตะน
pbx_modul_client_target: "/var/www/htdocs/client"   # ะฆะตะปะตะฒะพะน ะฟััั ะดะปั ะบะปะธะตะฝัะฐ

# State management (ะพััะปะตะถะธะฒะฐะฝะธะต ะฟะพัะปะตะดะฝะตะณะพ ัะธะฝััะพะฝะธะทะธัะพะฒะฐะฝะฝะพะณะพ ะบะพะผะผะธัะฐ)
pbx_modul_state_dir: "/opt/pbx_modul_sync"
pbx_modul_state_file: "{{ pbx_modul_state_dir }}/state.json"

# Monitoring settings (ััะพ ัะธะฝััะพะฝะธะทะธัะพะฒะฐัั)
pbx_modul_monitor_api: true                         # ะกะธะฝััะพะฝะธะทะธัะพะฒะฐัั API
pbx_modul_monitor_models: true                      # ะกะธะฝััะพะฝะธะทะธัะพะฒะฐัั ะผะพะดะตะปะธ
pbx_modul_monitor_client: false                     # ะกะธะฝััะพะฝะธะทะธัะพะฒะฐัั ะบะปะธะตะฝั (ะพัะบะปััะตะฝะพ)

# File permissions
pbx_modul_owner: "daemon"
pbx_modul_group: "daemon"
pbx_modul_mode: "0644"

# Retry settings
pbx_modul_retries: 3                                # ะะพะปะธัะตััะฒะพ ะฟะพะฒัะพัะพะฒ ะฟัะธ ะพัะธะฑะบะต
pbx_modul_delay: 5                                  # ะะฐะดะตัะถะบะฐ ะผะตะถะดั ะฟะพะฒัะพัะฐะผะธ (ัะตะบัะฝะดั)
```

**ะะปััะตะฒัะต ะฟะฐัะฐะผะตััั:**

- **`pbx_modul_project_id: "6"`** - Project ID ะฟัะพะตะบัะฐ `pbx/modul` ะฒ GitLab
- **`pbx_modul_branch: "develop"`** - ะะตัะบะฐ ะธะท ะบะพัะพัะพะน ะบะพะฟะธัะพะฒะฐัั ะดะฐะฝะฝัะต
- **`pbx_modul_gitlab_api`** - URL GitLab API (`http://10.19.1.20`)
- **`pbx_modul_token`** - GitLab API ัะพะบะตะฝ ะดะปั ะดะพัััะฟะฐ ะบ ัะตะฟะพะทะธัะพัะธั

---

### ะัะฝะพะฒะฝะพะน ัะบัะธะฟั ัะธะฝััะพะฝะธะทะฐัะธะธ: `tasks/main.yml`

**ะะฐะบ ัะฐะฑะพัะฐะตั:**

```yaml
---
- name: "๐ Ensure state directory exists"
  file:
    path: "{{ pbx_modul_state_dir }}"
    state: directory
    mode: "0755"
  # ะกะพะทะดะฐะตั ะดะธัะตะบัะพัะธั ะดะปั ััะฐะฝะตะฝะธั ัะพััะพัะฝะธั ัะธะฝััะพะฝะธะทะฐัะธะธ

- name: "๐ Get last commit from develop branch"
  uri:
    url: "{{ pbx_modul_gitlab_api }}/api/v4/projects/{{ pbx_modul_project_id }}/repository/commits?ref_name={{ pbx_modul_branch }}&per_page=1"
    method: GET
    headers:
      PRIVATE-TOKEN: "{{ pbx_modul_token }}"
  # ะะพะปััะฐะตั ะฟะพัะปะตะดะฝะธะน ะบะพะผะผะธั ะธะท ะฒะตัะบะธ develop ะฟัะพะตะบัะฐ pbx/modul ัะตัะตะท GitLab API

- name: "๐ Check if state file exists"
  stat:
    path: "{{ pbx_modul_state_file }}"
  # ะัะพะฒะตััะตั ัััะตััะฒัะตั ะปะธ ัะฐะนะป ัะพััะพัะฝะธั (ะฟะพัะปะตะดะฝะธะน ัะธะฝััะพะฝะธะทะธัะพะฒะฐะฝะฝัะน ะบะพะผะผะธั)

- name: "๐ Read current state"
  slurp:
    src: "{{ pbx_modul_state_file }}"
  # ะงะธัะฐะตั ัะฐะนะป ัะพััะพัะฝะธั (ะฟะพัะปะตะดะฝะธะน ัะธะฝััะพะฝะธะทะธัะพะฒะฐะฝะฝัะน ะบะพะผะผะธั)

- name: "๐ Check if sync is needed"
  set_fact:
    sync_needed: "{{ not state_file_stat.stat.exists or (current_state.content | b64decode | from_json).last_commit != last_commit.json[0].id }}"
  # ะัะพะฒะตััะตั ะฝัะถะฝะฐ ะปะธ ัะธะฝััะพะฝะธะทะฐัะธั:
  # - ะัะปะธ ัะฐะนะป ัะพััะพัะฝะธั ะฝะต ัััะตััะฒัะตั โ ัะธะฝััะพะฝะธะทะฐัะธั ะฝัะถะฝะฐ
  # - ะัะปะธ ะฟะพัะปะตะดะฝะธะน ะบะพะผะผะธั ะพัะปะธัะฐะตััั ะพั ัะพััะฐะฝะตะฝะฝะพะณะพ โ ัะธะฝััะพะฝะธะทะฐัะธั ะฝัะถะฝะฐ

- name: "๐ฅ Sync API files"
  include_tasks: sync_api.yml
  when: 
    - pbx_modul_sync_enabled | bool
    - sync_needed | default(true)
    - pbx_modul_monitor_api | bool
  # ะะฐะฟััะบะฐะตั ัะธะฝััะพะฝะธะทะฐัะธั API ัะฐะนะปะพะฒ (ะตัะปะธ ะฒะบะปััะตะฝะพ ะธ ะฝัะถะฝะพ)

- name: "๐ฅ Sync Models files"
  include_tasks: sync_models.yml
  # ะะฐะฟััะบะฐะตั ัะธะฝััะพะฝะธะทะฐัะธั ะผะพะดะตะปะตะน (ะตัะปะธ ะฒะบะปััะตะฝะพ ะธ ะฝัะถะฝะพ)

- name: "๐ฅ Sync client files"
  include_tasks: sync_client.yml
  # ะะฐะฟััะบะฐะตั ัะธะฝััะพะฝะธะทะฐัะธั ะบะปะธะตะฝััะบะธั ัะฐะนะปะพะฒ (ะตัะปะธ ะฒะบะปััะตะฝะพ ะธ ะฝัะถะฝะพ)

- name: "๐พ Update state file"
  copy:
    content: |
      {
        "last_commit": "{{ last_commit.json[0].id }}",
        "last_sync": "{{ ansible_date_time.iso8601 }}",
        "sync_count": {{ (current_state.content | b64decode | from_json).sync_count | default(0) + 1 if state_file_stat.stat.exists else 1 }}
      }
    dest: "{{ pbx_modul_state_file }}"
  # ะกะพััะฐะฝัะตั ะฟะพัะปะตะดะฝะธะน ัะธะฝััะพะฝะธะทะธัะพะฒะฐะฝะฝัะน ะบะพะผะผะธั ะฒ ัะฐะนะป ัะพััะพัะฝะธั
```

**ะะปะณะพัะธัะผ ัะฐะฑะพัั:**

1. **ะัะพะฒะตััะตั ะฟะพัะปะตะดะฝะธะน ะบะพะผะผะธั** ะฒ ะฒะตัะบะต `develop` ะฟัะพะตะบัะฐ `pbx/modul` ัะตัะตะท GitLab API
2. **ะกัะฐะฒะฝะธะฒะฐะตั ั ัะพััะฐะฝะตะฝะฝัะผ ัะพััะพัะฝะธะตะผ** (ัะฐะนะป `/opt/pbx_modul_sync/state.json`)
3. **ะัะปะธ ะตััั ะฝะพะฒัะต ะธะทะผะตะฝะตะฝะธั** โ ะทะฐะฟััะบะฐะตั ัะธะฝััะพะฝะธะทะฐัะธั
4. **ะัะปะธ ะธะทะผะตะฝะตะฝะธะน ะฝะตั** โ ะฟัะพะฟััะบะฐะตั ัะธะฝััะพะฝะธะทะฐัะธั

---

### ะกะบัะธะฟั ะบะพะฟะธัะพะฒะฐะฝะธั API ัะฐะนะปะพะฒ: `tasks/sync_api.yml`

**ะงัะพ ะดะตะปะฐะตั:**
ะะพะฟะธััะตั PHP ัะฐะนะปั ะธะท `server/api/` ะฟัะพะตะบัะฐ `pbx/modul` ะฒ `/var/www/htdocs/api/` ะฝะฐ PBX ัะตัะฒะตัะฐั.

**ะัะพัะตัั ัะฐะฑะพัั:**

```yaml
---
- name: "๐ Ensure API target directory exists"
  file:
    path: "{{ pbx_modul_api_target }}"
    state: directory
  # ะกะพะทะดะฐะตั ัะตะปะตะฒัั ะดะธัะตะบัะพัะธั /var/www/htdocs/api ะฝะฐ PBX ัะตัะฒะตัะต

- name: "๐ Get API directory structure"
  uri:
    url: "{{ pbx_modul_gitlab_api }}/api/v4/projects/{{ pbx_modul_project_id }}/repository/tree?ref={{ pbx_modul_branch }}&path={{ pbx_modul_api_source }}&recursive=true"
    method: GET
    headers:
      PRIVATE-TOKEN: "{{ pbx_modul_token }}"
  # ะะพะปััะฐะตั ััััะบัััั ะดะธัะตะบัะพัะธะธ server/api ะธะท ะฟัะพะตะบัะฐ pbx/modul ัะตัะตะท GitLab API

- name: "๐ Filter PHP files from API tree"
  set_fact:
    api_php_files: "{{ api_tree.json | selectattr('type', 'equalto', 'blob') | selectattr('path', 'match', '.*\\.php$') | list }}"
  # ะคะธะปััััะตั ัะพะปัะบะพ PHP ัะฐะนะปั (type=blob, ัะฐััะธัะตะฝะธะต .php)

- name: "๐ฅ Download API PHP files"
  uri:
    url: "{{ pbx_modul_gitlab_api }}/api/v4/projects/{{ pbx_modul_project_id }}/repository/files/{{ item.path | replace('/', '%2F') }}/raw?ref={{ pbx_modul_branch }}"
    method: GET
    headers:
      PRIVATE-TOKEN: "{{ pbx_modul_token }}"
    dest: "{{ pbx_modul_api_target }}/{{ item.path | regex_replace('^' + pbx_modul_api_source + '/', '') }}"
    force: true
  loop: "{{ api_php_files }}"
  # ะะปั ะบะฐะถะดะพะณะพ PHP ัะฐะนะปะฐ:
  # 1. ะะพะปััะฐะตั ัะพะดะตัะถะธะผะพะต ัะฐะนะปะฐ ัะตัะตะท GitLab API (/raw endpoint)
  # 2. ะกะพััะฐะฝัะตั ัะฐะนะป ะฝะฐ PBX ัะตัะฒะตัะต ะฒ /var/www/htdocs/api/
  # 3. ะกะพััะฐะฝัะตั ััััะบัััั ะดะธัะตะบัะพัะธะน (ะฟะพะดะดะธัะตะบัะพัะธะธ ัะพะทะดะฐัััั ะฐะฒัะพะผะฐัะธัะตัะบะธ)

- name: "๐ง Set correct permissions for API files"
  file:
    path: "{{ pbx_modul_api_target }}/{{ item.path | regex_replace('^' + pbx_modul_api_source + '/', '') }}"
    mode: "{{ pbx_modul_mode }}"
    owner: "{{ pbx_modul_owner }}"
    group: "{{ pbx_modul_group }}"
  loop: "{{ api_php_files }}"
  # ะฃััะฐะฝะฐะฒะปะธะฒะฐะตั ะฟัะฐะฒะธะปัะฝัะต ะฟัะฐะฒะฐ ะดะพัััะฟะฐ ะฝะฐ ะฒัะต ัะฐะนะปั
```

**ะัะธะผะตั:**

- **ะััะพัะฝะธะบ:** `http://10.19.1.20/pbx/modul` โ ะฒะตัะบะฐ `develop` โ ะฟััั `server/api/users.php`
- **ะะฐะทะฝะฐัะตะฝะธะต:** PBX ัะตัะฒะตั โ `/var/www/htdocs/api/users.php`

---

### ะกะบัะธะฟั ะบะพะฟะธัะพะฒะฐะฝะธั ะบะปะธะตะฝััะบะธั ัะฐะนะปะพะฒ: `tasks/sync_client.yml`

**ะงัะพ ะดะตะปะฐะตั:**
ะะพะฟะธััะตั ะบะปะธะตะฝััะบะธะต ัะฐะนะปั (JS, TS, CSS, HTML) ะธะท `client/` ะฟัะพะตะบัะฐ `pbx/modul` ะฒ `/var/www/htdocs/client/` ะฝะฐ PBX ัะตัะฒะตัะฐั.

**ะัะพัะตัั ะฐะฝะฐะปะพะณะธัะตะฝ ัะธะฝััะพะฝะธะทะฐัะธะธ API:**
1. ะะพะปััะฐะตั ััััะบัััั ะดะธัะตะบัะพัะธะธ `client/` ัะตัะตะท GitLab API
2. ะคะธะปััััะตั ะบะปะธะตะฝััะบะธะต ัะฐะนะปั (`.js`, `.jsx`, `.ts`, `.tsx`, `.css`, `.scss`, `.html`, `.json`)
3. ะกะบะฐัะธะฒะฐะตั ะบะฐะถะดัะน ัะฐะนะป ัะตัะตะท GitLab API `/raw` endpoint
4. ะกะพััะฐะฝัะตั ะฝะฐ PBX ัะตัะฒะตัะต ั ัะพััะฐะฝะตะฝะธะตะผ ััััะบัััั ะดะธัะตะบัะพัะธะน
5. ะฃััะฐะฝะฐะฒะปะธะฒะฐะตั ะฟัะฐะฒะฐ ะดะพัััะฟะฐ

**ะัะธะผะตัะฐะฝะธะต:** ะ ะบะพะฝัะธะณััะฐัะธะธ `pbx_modul_monitor_client: false` - ัะธะฝััะพะฝะธะทะฐัะธั ะบะปะธะตะฝัะฐ ะฟะพ ัะผะพะปัะฐะฝะธั ะพัะบะปััะตะฝะฐ.

---

### ะะฐะบ ัะฐะฑะพัะฐะตั ะฒะตัั ะฟัะพัะตัั ะบะพะฟะธัะพะฒะฐะฝะธั

**ะะพัะปะตะดะพะฒะฐัะตะปัะฝะพััั ะฒัะฟะพะปะฝะตะฝะธั:**

```
1. RUNNER ะฟะพะปััะฐะตั ะทะฐะดะฐัั ะพั GitLab
   โโ "Checking for jobs... received" (project=96)

2. RUNNER ัะพะทะดะฐะตั Docker ะบะพะฝัะตะนะฝะตั
   โโ ะัะฟะพะปัะทัะตั ะพะฑัะฐะท alpine:latest

3. RUNNER ะบะปะพะฝะธััะตั ัะตะฟะพะทะธัะพัะธะน pbx-iac
   โโ git clone http://10.19.1.20/Automatization/pbx-iac.git

4. RUNNER ะทะฐะฟััะบะฐะตั Ansible playbook
   โโ ansible-playbook sync_pbx_modul.yml

5. ANSIBLE ะฟะพะดะบะปััะฐะตััั ะบ PBX ัะตัะฒะตัะฐะผ
   โโ ะัะฟะพะปัะทัะตั SSH ะดะปั ะฟะพะดะบะปััะตะฝะธั

6. ANSIBLE ะฟัะพะฒะตััะตั ะฝัะถะฝะฐ ะปะธ ัะธะฝััะพะฝะธะทะฐัะธั
   โโ ะะพะปััะฐะตั ะฟะพัะปะตะดะฝะธะน ะบะพะผะผะธั ะธะท pbx/modul ัะตัะตะท GitLab API
   โโ ะงะธัะฐะตั ัะฐะนะป ัะพััะพัะฝะธั /opt/pbx_modul_sync/state.json
   โโ ะกัะฐะฒะฝะธะฒะฐะตั ะบะพะผะผะธัั

7. ะัะปะธ ัะธะฝััะพะฝะธะทะฐัะธั ะฝัะถะฝะฐ:
   โโ ะะปั API ัะฐะนะปะพะฒ:
   โ  โโ ะะพะปััะฐะตั ัะฟะธัะพะบ ัะฐะนะปะพะฒ ะธะท server/api/ ัะตัะตะท GitLab API
   โ  โโ ะคะธะปััััะตั PHP ัะฐะนะปั
   โ  โโ ะกะบะฐัะธะฒะฐะตั ะบะฐะถะดัะน ัะฐะนะป ัะตัะตะท GitLab API /raw endpoint
   โ  โโ ะกะพััะฐะฝัะตั ะฝะฐ PBX ัะตัะฒะตัะต ะฒ /var/www/htdocs/api/
   โ
   โโ ะะปั ะผะพะดะตะปะตะน:
   โ  โโ ะะพะปััะฐะตั ัะฟะธัะพะบ ัะฐะนะปะพะฒ ะธะท server/models/ ัะตัะตะท GitLab API
   โ  โโ ะกะบะฐัะธะฒะฐะตั ะบะฐะถะดัะน ัะฐะนะป ัะตัะตะท GitLab API /raw endpoint
   โ  โโ ะกะพััะฐะฝัะตั ะฝะฐ PBX ัะตัะฒะตัะต ะฒ /var/www/htdocs/models/
   โ
   โโ ะะปั ะบะปะธะตะฝัะฐ (ะตัะปะธ ะฒะบะปััะตะฝะพ):
      โโ ะะพะปััะฐะตั ัะฟะธัะพะบ ัะฐะนะปะพะฒ ะธะท client/ ัะตัะตะท GitLab API
      โโ ะกะบะฐัะธะฒะฐะตั ะบะฐะถะดัะน ัะฐะนะป ัะตัะตะท GitLab API /raw endpoint
      โโ ะกะพััะฐะฝัะตั ะฝะฐ PBX ัะตัะฒะตัะต ะฒ /var/www/htdocs/client/

8. ANSIBLE ะพะฑะฝะพะฒะปัะตั ัะฐะนะป ัะพััะพัะฝะธั
   โโ ะกะพััะฐะฝัะตั ะฟะพัะปะตะดะฝะธะน ัะธะฝััะพะฝะธะทะธัะพะฒะฐะฝะฝัะน ะบะพะผะผะธั ะฒ /opt/pbx_modul_sync/state.json

9. ANSIBLE ะทะฐะฒะตััะฐะตั ะฒัะฟะพะปะฝะตะฝะธะต
   โโ ะะพะทะฒัะฐัะฐะตั ัะตะทัะปััะฐั ะฒ GitLab

10. GITLAB ะฟะพะบะฐะทัะฒะฐะตั ัะตะทัะปััะฐั
    โโ ะฃัะฟะตัะฝะพ ะธะปะธ ะพัะธะฑะบะฐ ะฒ CI/CD Pipeline
```

**ะะปััะตะฒัะต ะผะพะผะตะฝัั:**

- **ะะพะฟะธัะพะฒะฐะฝะธะต ัะตัะตะท GitLab API** - ะฝะต ะธัะฟะพะปัะทัะตััั `git clone`, ัะฐะนะปั ัะบะฐัะธะฒะฐัััั ะฝะฐะฟััะผัั ัะตัะตะท GitLab API `/raw` endpoint
- **ะฃะผะฝะฐั ัะธะฝััะพะฝะธะทะฐัะธั** - ะฟัะพะฒะตััะตั ะฝัะถะฝะฐ ะปะธ ัะธะฝััะพะฝะธะทะฐัะธั (ััะฐะฒะฝะธะฒะฐะตั ะบะพะผะผะธัั)
- **ะกะพััะฐะฝะตะฝะธะต ััััะบัััั** - ะดะธัะตะบัะพัะธะธ ะธ ะฟะพะดะดะธัะตะบัะพัะธะธ ัะพััะฐะฝััััั ะฝะฐ PBX ัะตัะฒะตัะฐั
- **ะัะฐะฒะฐ ะดะพัััะฟะฐ** - ะฐะฒัะพะผะฐัะธัะตัะบะธ ัััะฐะฝะฐะฒะปะธะฒะฐัััั ะฟัะฐะฒะธะปัะฝัะต ะฟัะฐะฒะฐ (daemon:daemon, 0644)

---

## ๐๏ธ ะะฝััััะผะตะฝัั, ะธัะฟะพะปัะทัะตะผัะต ะฒ ะฟัะพะตะบัะต

### Infrastructure as Code (IAC)

1. **Ansible**
   - ะะฒัะพะผะฐัะธะทะฐัะธั ะบะพะฝัะธะณััะฐัะธะธ PBX ัะธััะตะผ
   - Playbooks ะดะปั ัะฟัะฐะฒะปะตะฝะธั ัะพััะพัะฝะธะตะผ
   - Inventory ะดะปั ะพะฟัะตะดะตะปะตะฝะธั ัะตะปะตะฒัั ัะตัะฒะตัะพะฒ

2. **Terraform** (ะฒะพะทะผะพะถะฝะพ)
   - ะฃะฟัะฐะฒะปะตะฝะธะต ะธะฝััะฐััััะบัััะพะน
   - ะะตััะธะพะฝะธัะพะฒะฐะฝะธะต ัะพััะพัะฝะธั

3. **Git**
   - ะะตััะธะพะฝะธัะพะฒะฐะฝะธะต ะบะพะดะฐ ะธ ะบะพะฝัะธะณััะฐัะธะน
   - ะััะปะตะถะธะฒะฐะฝะธะต ะธะทะผะตะฝะตะฝะธะน

### CI/CD

1. **GitLab CI/CD**
   - ะะฒัะพะผะฐัะธะทะฐัะธั ะฒัะฟะพะปะฝะตะฝะธั ะทะฐะดะฐั
   - Pipeline ะดะปั ะบะพะพัะดะธะฝะฐัะธะธ ััะฐะฟะพะฒ

2. **GitLab Runner**
   - ะัะฟะพะปะฝะตะฝะธะต ะทะฐะดะฐั ะฒ ะธะทะพะปะธัะพะฒะฐะฝะฝะพะน ััะตะดะต
   - Docker ะบะพะฝัะตะนะฝะตัั ะดะปั ะธะทะพะปััะธะธ

### ะััะณะธะต ะธะฝััััะผะตะฝัั

- **Docker**: ะดะปั ะธะทะพะปััะธะธ ะฒัะฟะพะปะฝะตะฝะธั ะทะฐะดะฐั
- **SSH**: ะดะปั ะฟะพะดะบะปััะตะฝะธั ะบ PBX ัะตัะฒะตัะฐะผ
- **API**: ะดะปั ะฒะทะฐะธะผะพะดะตะนััะฒะธั ั PBX ัะธััะตะผะฐะผะธ

---

## โฐ ะะตัะฐะฝะธะทะผ ะทะฐะฟััะบะฐ (ะะ cron!)

**โ๏ธ ะะะะะ:** ะะฐ ัะตัะฒะตัะต runner'ะฐ (`10.19.1.108`) **ะะะข cron ะทะฐะดะฐั** ะดะปั ะทะฐะฟััะบะฐ ัะธะฝััะพะฝะธะทะฐัะธะธ!

**ะะฐะบ ััะพ ะฝะฐ ัะฐะผะพะผ ะดะตะปะต ัะฐะฑะพัะฐะตั:**

1. **Runner ัะฐะฑะพัะฐะตั ะบะฐะบ systemd ัะตัะฒะธั** - ะฟะพััะพัะฝะฝะพ ะทะฐะฟััะตะฝ
   ```bash
   systemctl status gitlab-runner.service
   # Active: active (running)
   ```

2. **Runner ะฟะพััะพัะฝะฝะพ ะพะฟัะฐัะธะฒะฐะตั GitLab** (polling, ะฝะต cron)
   - ะะฐัััะพะนะบะฐ: `check_interval = 0` ะฒ `/etc/gitlab-runner/config.toml`
   - Runner ะฟะพััะพัะฝะฝะพ ะดะตะปะฐะตั ะทะฐะฟัะพัั ะบ GitLab: "Checking for jobs..."
   - ะะพะณะดะฐ ะตััั ะทะฐะดะฐัะฐ โ ะฟะพะปััะฐะตั ะพัะฒะตั "Checking for jobs... received"

3. **ะขัะธะณะณะตั ะทะฐะฟััะบะฐ:**
   - ะัะพะณัะฐะผะผะธัั ะดะตะปะฐะตั push ะฒ ะฟัะพะตะบั `pbx/modul` (ะฒะตัะบะฐ `develop`)
   - GitLab ัะพะทะดะฐะตั CI/CD Pipeline ะฒ ะฟัะพะตะบัะต `pbx-iac`
   - Pipeline ัะพะทะดะฐะตั ะทะฐะดะฐัั (job) ะดะปั runner'ะฐ
   - Runner ะฒะธะดะธั ะทะฐะดะฐัั ะฟัะธ ัะปะตะดัััะตะผ ะพะฟัะพัะต ะธ ะฒัะฟะพะปะฝัะตั ะตั

4. **ะงัะพ ะะ ะธัะฟะพะปัะทัะตััั:**
   - โ Cron ะทะฐะดะฐัะธ (`crontab -l` ะฟัััะพ)
   - โ Scheduled tasks
   - โ Webhook ะพั GitLab (ััะพ polling, ะฝะต push-ัะฒะตะดะพะผะปะตะฝะธั)

**ะัะพะฒะตัะบะฐ ััะพ ะฝะตั cron:**
```bash
# ะะฐ ัะตัะฒะตัะต 10.19.1.108
crontab -l                    # ะัััะพ
crontab -u gitlab-runner -l   # ะัััะพ
grep -r sync /etc/cron*       # ะะธัะตะณะพ ะฝะต ะฝะฐะนะดะตะฝะพ
```

**ะงัะพ ะดะตะนััะฒะธัะตะปัะฝะพ ัะฐะฑะพัะฐะตั:**
```bash
# Runner ัะฐะฑะพัะฐะตั ะบะฐะบ ัะตัะฒะธั
systemctl status gitlab-runner.service

# Runner ะฟะพััะพัะฝะฝะพ ะพะฟัะฐัะธะฒะฐะตั GitLab
journalctl -u gitlab-runner.service -f
# ะะธะดะฝะพ ะฟะพััะพัะฝะฝัะต ะทะฐะฟัะพัั: "Checking for jobs..."
```

---

## ๐ ะฃะฟัะฐะฒะปะตะฝะธะต ะฟัะพะตะบัะพะผ

### ะัะพัะผะพัั ััะฐัััะฐ ะทะฐะดะฐั

**ะ GitLab:**
1. ะัะบัััั ะฟัะพะตะบั: `http://10.19.1.20/Automatization/pbx-iac` (ะทะฐะผะตะฝะธัะต ะฝะฐ IP ะฒะฐัะตะณะพ GitLab)
2. ะะตัะตะนัะธ ะฒ **CI/CD โ Pipelines**
3. ะัะฑัะฐัั ะฝัะถะฝัะน pipeline
4. ะัะพัะผะพััะตัั ะดะตัะฐะปะธ ะฒัะฟะพะปะฝะตะฝะธั ะบะฐะถะดะพะน ะทะฐะดะฐัะธ (job)

**ะะฐ ัะตัะฒะตัะต Runner'ะฐ:**
```bash
# ะัะพัะผะพัั ะปะพะณะพะฒ ะทะฐะดะฐั pbx-iac ะฟัะพะตะบัะฐ
journalctl -u gitlab-runner.service | grep -iE "pbx-iac|project=96"

# ะะพัะปะตะดะฝะธะต ะทะฐะดะฐัะธ
journalctl -u gitlab-runner.service --since '7 days ago' | grep "project=96"

# ะัะพะฒะตัะบะฐ ััะฐัััะฐ runner'ะฐ
gitlab-runner verify | grep "pbx-iac-runner"
```

### ะะฐะฟััะบ Pipeline ะฒัััะฝัั

**ะ GitLab:**
1. ะัะบัััั ะฟัะพะตะบั
2. ะะตัะตะนัะธ ะฒ **CI/CD โ Pipelines**
3. ะะฐะถะฐัั **Run Pipeline**
4. ะัะฑัะฐัั ะฒะตัะบั (ะพะฑััะฝะพ `main`)
5. ะะฐะถะฐัั **Run Pipeline**

### ะััะฐะฝะพะฒะบะฐ/ะัะผะตะฝะฐ ะทะฐะดะฐัะธ

**ะ GitLab:**
1. ะัะบัััั pipeline
2. ะัะฑัะฐัั ะทะฐะดะฐัั (job)
3. ะะฐะถะฐัั **Cancel** (ะพัะผะตะฝะฐ)

---

## ๐ ะะพะฝะธัะพัะธะฝะณ ะธ ะดะธะฐะณะฝะพััะธะบะฐ

### ะัะพะฒะตัะบะฐ ััะฐัััะฐ Runner'ะฐ

```bash
# ะัะพะฒะตัะธัั, ััะพ runner ัะฐะฑะพัะฐะตั
systemctl status gitlab-runner.service

# ะัะพะฒะตัะธัั ะฟะพะดะบะปััะตะฝะธะต ะบ GitLab
gitlab-runner verify

# ะัะพะฒะตัะธัั ะบะพะฝัะธะณััะฐัะธั pbx-iac-runner
cat /etc/gitlab-runner/config.toml | grep -A 20 "pbx-iac-runner"
```

### ะัะพัะผะพัั ะปะพะณะพะฒ ะทะฐะดะฐั

```bash
# ะัะต ะทะฐะดะฐัะธ pbx-iac ะฟัะพะตะบัะฐ
journalctl -u gitlab-runner.service | grep "pbx-iac\|project=96"

# ะะพัะปะตะดะฝะธะต 50 ะทะฐะดะฐั
journalctl -u gitlab-runner.service -n 500 | grep "project=96"

# ะขะพะปัะบะพ ััะฟะตัะฝัะต ะทะฐะดะฐัะธ
journalctl -u gitlab-runner.service | grep "project=96" | grep -v "WARNING"

# ะขะพะปัะบะพ ะทะฐะดะฐัะธ ั ะพัะธะฑะบะฐะผะธ
journalctl -u gitlab-runner.service | grep "project=96" | grep "WARNING"
```

### ะัะพะฒะตัะบะฐ ะฒัะฟะพะปะฝะตะฝะธั ะทะฐะดะฐั

```bash
# ะัะพะฒะตัะธัั ะฐะบัะธะฒะฝัะต ะทะฐะดะฐัะธ
docker ps | grep gitlab-runner

# ะัะพะฒะตัะธัั ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตััััะพะฒ
top -p $(pgrep gitlab-runner)

# ะัะพะฒะตัะธัั ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะดะธัะบะฐ
du -sh /home/gitlab-runner/
```

---

## โ ะขะธะฟะธัะฝัะต ะฟัะพะฑะปะตะผั ะธ ัะตัะตะฝะธั

### 1. ะะฐะดะฐัะธ ะฝะต ะฒัะฟะพะปะฝััััั ะดะปั pbx-iac ะฟัะพะตะบัะฐ

**ะกะธะผะฟัะพะผั:**
- ะ ะปะพะณะฐั ะฝะตั ะทะฐะดะฐั ะดะปั `project=96`
- ะ GitLab ะฟะพะบะฐะทัะฒะฐะตััั "No runners available"

**ะะตัะตะฝะธะต:**
```bash
# 1. ะัะพะฒะตัะธัั ััะฐััั runner'ะฐ
systemctl status gitlab-runner.service

# 2. ะัะพะฒะตัะธัั, ััะพ pbx-iac-runner ะทะฐัะตะณะธัััะธัะพะฒะฐะฝ
gitlab-runner verify | grep "pbx-iac-runner"

# 3. ะัะพะฒะตัะธัั ะบะพะฝัะธะณััะฐัะธั
cat /etc/gitlab-runner/config.toml | grep "pbx-iac-runner"

# 4. ะ GitLab ะฟัะพะฒะตัะธัั ะฝะฐัััะพะนะบะธ ะฟัะพะตะบัะฐ
# GitLab โ Project โ Settings โ CI/CD โ Runners
# ะฃะฑะตะดะธัััั, ััะพ pbx-iac-runner ะฝะฐะทะฝะฐัะตะฝ ะฟัะพะตะบัั
```

### 2. ะะฐะดะฐัะธ ะฟะฐะดะฐัั ั ะพัะธะฑะบะฐะผะธ

**ะกะธะผะฟัะพะผั:**
- ะ ะปะพะณะฐั: `WARNING: Job failed: exit code 1`
- ะ GitLab ะฟะพะบะฐะทัะฒะฐะตััั ััะฐััั "failed"

**ะะตัะตะฝะธะต:**
1. **ะัะพัะผะพััะตัั ะดะตัะฐะปัะฝัะต ะปะพะณะธ ะฒ GitLab:**
   - ะัะบัััั ะฟัะพะตะบั โ CI/CD โ Pipelines
   - ะัะฑัะฐัั ัะฟะฐะฒัะธะน pipeline
   - ะะปะธะบะฝััั ะฝะฐ ัะฟะฐะฒััั ะทะฐะดะฐัั (job)
   - ะัะพัะผะพััะตัั ะปะพะณะธ ะฒัะฟะพะปะฝะตะฝะธั

2. **ะัะพะฒะตัะธัั ะปะพะณะธ ะฝะฐ ัะตัะฒะตัะต runner'ะฐ:**
   ```bash
   journalctl -u gitlab-runner.service | grep -A 50 "job=<JOB_ID>"
   ```

3. **ะัะพะฒะตัะธัั ะบะพะฝัะธะณััะฐัะธั:**
   - ะัะพะฒะตัะธัั `.gitlab-ci.yml` ะฝะฐ ัะธะฝัะฐะบัะธัะตัะบะธะต ะพัะธะฑะบะธ
   - ะัะพะฒะตัะธัั ะดะพัััะฟะฝะพััั Docker ะพะฑัะฐะทะฐ
   - ะัะพะฒะตัะธัั ะดะพัััะฟ ะบ PBX ัะตัะฒะตัะฐะผ (SSH, API)

### 3. Runner ะฝะต ะผะพะถะตั ะฟะพะดะบะปััะธัััั ะบ PBX ัะตัะฒะตัะฐะผ

**ะกะธะผะฟัะพะผั:**
- ะัะธะฑะบะธ ะฟะพะดะบะปััะตะฝะธั (SSH, API)
- ะขะฐะนะผะฐััั

**ะะตัะตะฝะธะต:**
```bash
# 1. ะัะพะฒะตัะธัั ะดะพัััะฟะฝะพััั PBX ัะตัะฒะตัะพะฒ ะธะท runner'ะฐ
ping <PBX_SERVER_IP>

# 2. ะัะพะฒะตัะธัั SSH ะฟะพะดะบะปััะตะฝะธะต (ะตัะปะธ ะธัะฟะพะปัะทัะตััั)
ssh -i /path/to/key user@<PBX_SERVER_IP>

# 3. ะัะพะฒะตัะธัั ัะตัะตะฒัะต ะฝะฐัััะพะนะบะธ Docker ะบะพะฝัะตะนะฝะตัะฐ
# ะ .gitlab-ci.yml ะผะพะถะฝะพ ัะบะฐะทะฐัั network_mode ะธะปะธ extra_hosts
```

### 4. ะะตะดะพััะฐัะพัะฝะพ ะฟัะฐะฒ ะดะปั ะฒัะฟะพะปะฝะตะฝะธั ะทะฐะดะฐั

**ะกะธะผะฟัะพะผั:**
- ะัะธะฑะบะธ ะดะพัััะฟะฐ ะบ ัะฐะนะปะฐะผ
- ะัะธะฑะบะธ ะฒัะฟะพะปะฝะตะฝะธั ะบะพะผะฐะฝะด

**ะะตัะตะฝะธะต:**
- ะัะพะฒะตัะธัั ะฟัะฐะฒะฐ ะดะพัััะฟะฐ ะฟะพะปัะทะพะฒะฐัะตะปั `gitlab-runner` ะฒ ัะธััะตะผะต
- ะัะพะฒะตัะธัั SSH ะบะปััะธ ะดะปั ะฟะพะดะบะปััะตะฝะธั ะบ PBX ัะตัะฒะตัะฐะผ
- ะัะพะฒะตัะธัั ัะพะบะตะฝั/ะบะปััะธ API ะฒ ะฟะตัะตะผะตะฝะฝัั GitLab CI/CD

---

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### ะขะพะบะตะฝั ะธ ะบะปััะธ

**โ๏ธ ะะะะะ:**
- ะขะพะบะตะฝ runner'ะฐ ััะฐะฝะธััั ะฒ `/etc/gitlab-runner/config.toml`
- SSH ะบะปััะธ ะดะปั ะฟะพะดะบะปััะตะฝะธั ะบ PBX ัะตัะฒะตัะฐะผ ะดะพะปะถะฝั ััะฐะฝะธัััั ะฒ GitLab CI/CD Variables
- ะะต ะบะพะผะผะธัััะต ัะพะบะตะฝั ะธ ะบะปััะธ ะฒ ัะตะฟะพะทะธัะพัะธะน!

**ะฅัะฐะฝะตะฝะธะต ัะตะบัะตัะพะฒ:**
1. **GitLab CI/CD Variables:**
   - GitLab โ Project โ Settings โ CI/CD โ Variables
   - ะะพะฑะฐะฒะธัั ะฟะตัะตะผะตะฝะฝัะต ั ัะธะฟะพะผ "Variable" ะธะปะธ "File"
   - ะัะฟะพะปัะทะพะฒะฐัั ะฒ `.gitlab-ci.yml` ะบะฐะบ `$VARIABLE_NAME`

2. **ะัะธะผะตั:**
   ```yaml
   script:
     - echo "Using SSH key from GitLab Variables"
     - echo "$SSH_PRIVATE_KEY" > /tmp/ssh_key
     - chmod 600 /tmp/ssh_key
     - ssh -i /tmp/ssh_key user@pbx-server
   ```

### ะะพัััะฟ ะบ PBX ัะตัะฒะตัะฐะผ

- ะัะฟะพะปัะทะพะฒะฐัั ะพัะดะตะปัะฝะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั ะดะปั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ
- ะะณัะฐะฝะธัะธัั ะฟัะฐะฒะฐ ะดะพัััะฟะฐ ัะพะปัะบะพ ะฝะตะพะฑัะพะดะธะผัะผะธ ะพะฟะตัะฐัะธัะผะธ
- ะะตะณัะปััะฝะพ ัะพัะธัะพะฒะฐัั ะบะปััะธ ะธ ะฟะฐัะพะปะธ
- ะัะฟะพะปัะทะพะฒะฐัั firewall ะฟัะฐะฒะธะปะฐ ะดะปั ะพะณัะฐะฝะธัะตะฝะธั ะดะพัััะฟะฐ

---

## ๐ ะกัะฐัะธััะธะบะฐ ะธ ะผะตััะธะบะธ

### ะะพะฝะธัะพัะธะฝะณ ะฒัะฟะพะปะฝะตะฝะธั

**ะ GitLab:**
- **CI/CD โ Pipelines**: ะะฑะทะพั ะฒัะตั pipeline'ะพะฒ
- **CI/CD โ Jobs**: ะะตัะฐะปะธ ะฒัะฟะพะปะฝะตะฝะธั ะทะฐะดะฐั
- **Project โ Analytics โ CI/CD**: ะะฝะฐะปะธัะธะบะฐ ะฒัะฟะพะปะฝะตะฝะธั

**ะะฐ ัะตัะฒะตัะต Runner'ะฐ:**
```bash
# ะะพะปะธัะตััะฒะพ ะฒัะฟะพะปะฝะตะฝะฝัั ะทะฐะดะฐั ะทะฐ ะฟะพัะปะตะดะฝะธะต 30 ะดะฝะตะน
journalctl -u gitlab-runner.service --since '30 days ago' | \
  grep "project=96" | grep "Checking for jobs" | wc -l

# ะกัะตะดะฝัั ะดะปะธัะตะปัะฝะพััั ะทะฐะดะฐั
journalctl -u gitlab-runner.service --since '30 days ago' | \
  grep "project=96" | grep "duration_s" | \
  awk '{print $NF}' | awk '{sum+=$1; count++} END {print sum/count " seconds"}'

# ะัะพัะตะฝั ััะฟะตัะฝัั ะทะฐะดะฐั
SUCCESS=$(journalctl -u gitlab-runner.service --since '30 days ago' | \
  grep "project=96" | grep -v "WARNING" | wc -l)
TOTAL=$(journalctl -u gitlab-runner.service --since '30 days ago' | \
  grep "project=96" | grep "Checking for jobs" | wc -l)
echo "Success rate: $((SUCCESS * 100 / TOTAL))%"
```

---

## ๐ ะะฐะฑะพัะธะน ะฟัะพัะตัั (Workflow)

### ะขะธะฟะธัะฝัะน ัะธะบะป ัะฐะทัะฐะฑะพัะบะธ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    WORKFLOW ะะะะะะะะขะะ                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

1. ะะะะะะะะขะะ
   โโ ะกะพะทะดะฐัั ะฝะพะฒัั ะฒะตัะบั: git checkout -b feature/new-pbx-config
   โโ ะะฝะตััะธ ะธะทะผะตะฝะตะฝะธั ะฒ ะบะพะด
   โโ ะะฐะบะพะผะผะธัะธัั: git commit -m "Add new PBX configuration"
   โโ ะะฐะฟััะธัั: git push origin feature/new-pbx-config

2. CI/CD PIPELINE (ะฐะฒัะพะผะฐัะธัะตัะบะธ)
   โโ Validate: ะัะพะฒะตัะบะฐ ัะธะฝัะฐะบัะธัะฐ ะธ ะฒะฐะปะธะดะฝะพััะธ
   โโ Build: ะกะฑะพัะบะฐ ะฐััะตัะฐะบัะพะฒ
   โโ Test: ะะฐะฟััะบ ัะตััะพะฒ

3. CODE REVIEW
   โโ ะกะพะทะดะฐัั Merge Request ะฒ GitLab
   โโ ะะพะปะปะตะณะธ ะฟัะพะฒะตัััั ะบะพะด
   โโ ะะฑััะถะดะตะฝะธะต ะธะทะผะตะฝะตะฝะธะน

4. MERGE
   โโ ะฃัะฒะตัะถะดะตะฝะธะต Merge Request
   โโ ะกะปะธัะฝะธะต ั main ะฒะตัะบะพะน
   โโ ะะฒัะพะผะฐัะธัะตัะบะธะน ะทะฐะฟััะบ Deploy pipeline

5. DEPLOY (ะฐะฒัะพะผะฐัะธัะตัะบะธ ะธะปะธ ะฒัััะฝัั)
   โโ ะะฐะทะฒะตัััะฒะฐะฝะธะต ะฝะฐ ัะตััะพะฒัั ััะตะดั
   โโ ะขะตััะธัะพะฒะฐะฝะธะต
   โโ ะะฐะทะฒะตัััะฒะฐะฝะธะต ะฝะฐ ะฟัะพะดะฐะบัะฝ (ะตัะปะธ ะฒัะต OK)
   โโ ะะพะฝะธัะพัะธะฝะณ ัะตะทัะปััะฐัะฐ
```

### ะะฐัะธะฐะฝัั ัะฐะทะฒะตัััะฒะฐะฝะธั

**ะะฒัะพะผะฐัะธัะตัะบะพะต ัะฐะทะฒะตัััะฒะฐะฝะธะต:**
- ะัะธ merge ะฒ `main` ะฒะตัะบั
- ะัะธ ัะพะทะดะฐะฝะธะธ ัะตะณะฐ (release)

**ะััะฝะพะต ัะฐะทะฒะตัััะฒะฐะฝะธะต:**
- ะขัะตะฑัะตั ะฟะพะดัะฒะตัะถะดะตะฝะธั ะฒ GitLab
- ะะฐัััะพะนะบะฐ: `when: manual` ะฒ `.gitlab-ci.yml`

---

## ๐ ะงะตะบ-ะปะธัั ะดะปั ะบะพะปะปะตะณะธ

ะัะธ ะฟัะธะฝััะธะธ ะดะตะป ะฟัะพะฒะตัััะต:

- [ ] ะัะพะตะบั ะดะพัััะฟะตะฝ ะฒ GitLab (`http://10.19.1.20/Automatization/pbx-iac`)
- [ ] Runner `pbx-iac-runner` ัะฐะฑะพัะฐะตั (`gitlab-runner verify`)
- [ ] ะะพัะปะตะดะฝะธะต ะทะฐะดะฐัะธ ะฒัะฟะพะปะฝััััั ััะฟะตัะฝะพ (ะฟัะพะฒะตัะธัั ะฒ GitLab)
- [ ] ะะพะณะธ ะดะพัััะฟะฝั (`journalctl -u gitlab-runner.service`)
- [ ] ะะฝะฐะตัะต, ะบะฐะบ ะทะฐะฟัััะธัั pipeline ะฒัััะฝัั
- [ ] ะะฝะฐะตัะต, ะณะดะต ัะผะพััะตัั ัะตะทัะปััะฐัั ะฒัะฟะพะปะฝะตะฝะธั
- [ ] ะะฝะฐะตัะต, ะบะฐะบะธะต ะธะฝััััะผะตะฝัั ะธัะฟะพะปัะทััััั (Ansible, Terraform ะธ ั.ะด.)
- [ ] ะะฝะฐะตัะต, ะบะฐะบะธะต PBX ัะตัะฒะตัั ัะฟัะฐะฒะปััััั ัะตัะตะท ะฟัะพะตะบั
- [ ] ะะฝะฐะตัะต, ะณะดะต ััะฐะฝัััั ัะตะบัะตัั (SSH ะบะปััะธ, ัะพะบะตะฝั)
- [ ] ะะฝะฐะตัะต ะฟัะพัะตัั ัะฐะทะฒะตัััะฒะฐะฝะธั (ะฐะฒัะพะผะฐัะธัะตัะบะธะน/ัััะฝะพะน)
- [ ] ะะฝะฐะตัะต, ะบะฐะบ ะพัะบะฐัะธัั ะธะทะผะตะฝะตะฝะธั ะฟัะธ ะฟัะพะฑะปะตะผะฐั

---

## ๐ ะกะฒัะทะฐะฝะฝัะต ัะตััััั

- **GitLab Runner**: ะกะผ. [GITLAB_RUNNER_GUIDE.md](./GITLAB_RUNNER_GUIDE.md)
- **GitLab CI/CD**: ะะพะบัะผะตะฝัะฐัะธั ะฟัะพะตะบัะฐ ะฒ GitLab
- **Ansible**: https://docs.ansible.com/
- **Terraform**: https://www.terraform.io/docs (ะตัะปะธ ะธัะฟะพะปัะทัะตััั)

---

## โ๏ธ ะะะะะซะ ะะะะะงะะะะฏ

1. **ะะต ะบะพะผะผะธัััะต ัะตะบัะตัั ะฒ ัะตะฟะพะทะธัะพัะธะน!**
   - ะัะฟะพะปัะทัะนัะต GitLab CI/CD Variables ะดะปั ััะฐะฝะตะฝะธั ัะพะบะตะฝะพะฒ ะธ ะบะปััะตะน

2. **ะัะพะฒะตััะนัะต ะธะทะผะตะฝะตะฝะธั ะฟะตัะตะด ัะฐะทะฒะตัััะฒะฐะฝะธะตะผ:**
   - ะัะฟะพะปัะทัะนัะต ะฒะตัะบะธ ะธ Merge Requests
   - ะขะตััะธััะนัะต ะฝะฐ ัะตััะพะฒะพะน ััะตะดะต ะฟะตัะตะด ะฟัะพะดะฐะบัะฝ

3. **ะะพะฝะธัะพัััะต ะฒัะฟะพะปะฝะตะฝะธะต ะทะฐะดะฐั:**
   - ะะตะณัะปััะฝะพ ะฟัะพะฒะตััะนัะต ััะฐััั pipeline'ะพะฒ
   - ะะฑัะฐัะฐะนัะต ะฒะฝะธะผะฐะฝะธะต ะฝะฐ ะฟัะตะดัะฟัะตะถะดะตะฝะธั ะธ ะพัะธะฑะบะธ

4. **ะะตะดะธัะต ะดะพะบัะผะตะฝัะฐัะธั:**
   - ะะฑะฝะพะฒะปัะนัะต README.md ะฒ ะฟัะพะตะบัะต
   - ะะพะบัะผะตะฝัะธััะนัะต ะธะทะผะตะฝะตะฝะธั ะฒ ะบะพะฝัะธะณััะฐัะธะธ

5. **ะะตะทะตัะฒะฝะพะต ะบะพะฟะธัะพะฒะฐะฝะธะต:**
   - ะะตะณัะปััะฝะพ ะดะตะปะฐะนัะต ะฑัะบะฐะฟั ะบะพะฝัะธะณััะฐัะธะน
   - ะฅัะฐะฝะธัะต ัะพััะพัะฝะธะต ะธะฝััะฐััััะบัััั

---

**ะะพัะปะตะดะฝะตะต ะพะฑะฝะพะฒะปะตะฝะธะต:** 2025-11-20

