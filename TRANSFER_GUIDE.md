# –ì–∞–π–¥ –ø–æ –ø–µ—Ä–µ–¥–∞—á–µ –¥–µ–ª - Foreman –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –∫–æ–ª–ª–µ–≥–∏ –ø–æ —Ä–∞–±–æ—Ç–µ —Å Foreman: –∫–∞–∫ –º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∑–∞–ø—É—Å–∫–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É, —Ä–µ—à–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã.

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
2. [–ò–∑–º–µ–Ω–µ–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–æ–≤ –∏ MAC-–∞–¥—Ä–µ—Å–æ–≤](#–∏–∑–º–µ–Ω–µ–Ω–∏–µ-ip-–∞–¥—Ä–µ—Å–æ–≤-–∏-mac-–∞–¥—Ä–µ—Å–æ–≤)
3. [–ó–∞–ø—É—Å–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —á–µ—Ä–µ–∑ iPXE](#–∑–∞–ø—É—Å–∫-—É—Å—Ç–∞–Ω–æ–≤–∫–∏-—á–µ—Ä–µ–∑-ipxe)
4. [–†–∞–±–æ—Ç–∞ —Å —Ö–æ—Å—Ç–∞–º–∏ –≤ Foreman](#—Ä–∞–±–æ—Ç–∞-—Å-—Ö–æ—Å—Ç–∞–º–∏-–≤-foreman)
5. [–°–µ—Ä–≤–∏—Å—ã –∏ –∏—Ö –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫](#—Å–µ—Ä–≤–∏—Å—ã-–∏-–∏—Ö-–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫)
6. [–¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏–µ](#—Ç–∏–ø–∏—á–Ω—ã–µ-–æ—à–∏–±–∫–∏-–∏-–∏—Ö-—Ä–µ—à–µ–Ω–∏–µ)
7. [–ß—Ç–æ –¥–µ–ª–∞—Ç—å –≤ –≤–µ–±–µ, —á—Ç–æ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ](#—á—Ç–æ-–¥–µ–ª–∞—Ç—å-–≤-–≤–µ–±–µ-—á—Ç–æ-–≤-—Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
8. [–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏](#–ø—Ä–æ–≤–µ—Ä–∫–∞-—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –î–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ

- **Foreman –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: `https://10.19.1.209/` (–∏–ª–∏ `https://foreman.local/`)
- **SSH –¥–æ—Å—Ç—É–ø**: `ssh root@10.19.1.209` (–ø–∞—Ä–æ–ª—å: `Q1w2a3s40007`)
- **–õ–æ–≥–∏–Ω**: `admin`
- **–ü–∞—Ä–æ–ª—å**: (—Å–º. –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–ª–∏ —Å–±—Ä–æ—Å–∏—Ç—å –∫–æ–º–∞–Ω–¥–æ–π `foreman-rake permissions:reset`)

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
systemctl status foreman foreman-proxy isc-dhcp-server tftpd-hpa

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö DHCP –∞—Ä–µ–Ω–¥
cat /var/lib/dhcp/dhcpd.leases | grep -A 10 "lease 10.19.1"

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
tail -f /var/log/foreman/production.log
tail -f /var/log/foreman-proxy/proxy.log
tail -f /var/log/syslog | grep dhcpd
```

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–æ–≤ –∏ MAC-–∞–¥—Ä–µ—Å–æ–≤

### 1. –í –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Foreman (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–®–∞–≥ 1: –ò–∑–º–µ–Ω–∏—Ç—å IP-–∞–¥—Ä–µ—Å —Ö–æ—Å—Ç–∞**

1. –ó–∞–π–¥–∏—Ç–µ –≤ **–£–∑–ª—ã ‚Üí –í—Å–µ —É–∑–ª—ã**
2. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π —Ö–æ—Å—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `deb12-luks-backplane.local`)
3. –ù–∞–∂–º–∏—Ç–µ **–ò–∑–º–µ–Ω–∏—Ç—å**
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**
5. –ù–∞–∂–º–∏—Ç–µ **–ò–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
6. –ò–∑–º–µ–Ω–∏—Ç–µ **IPv4 –∞–¥—Ä–µ—Å** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `10.19.1.251`)
7. –ù–∞–∂–º–∏—Ç–µ **–û–ö**, –∑–∞—Ç–µ–º **–ü—Ä–∏–º–µ–Ω–∏—Ç—å**

**–®–∞–≥ 2: –ò–∑–º–µ–Ω–∏—Ç—å MAC-–∞–¥—Ä–µ—Å —Ö–æ—Å—Ç–∞**

1. –í —Ç–æ–º –∂–µ –æ–∫–Ω–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ö–æ—Å—Ç–∞
2. –í —Ä–∞–∑–¥–µ–ª–µ **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã** –Ω–∞–∂–º–∏—Ç–µ **–ò–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
3. –ò–∑–º–µ–Ω–∏—Ç–µ **MAC –∞–¥—Ä–µ—Å** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `bc:fc:e7:3b:54:36`)
4. –ù–∞–∂–º–∏—Ç–µ **–û–ö**, –∑–∞—Ç–µ–º **–ü—Ä–∏–º–µ–Ω–∏—Ç—å**

**–®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç—å DHCP —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—é (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)**

Foreman –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç DHCP —á–µ—Ä–µ–∑ Smart Proxy –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ö–æ—Å—Ç–∞. –ï—Å–ª–∏ –Ω–µ—Ç - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ DHCP (—Å–º. —Ä–∞–∑–¥–µ–ª "–°–µ—Ä–≤–∏—Å—ã").

### 2. –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (–≤—Ä—É—á–Ω—É—é)

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ DHCP —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏:**

```bash
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ö–æ—Å—Ç–æ–≤
nano /etc/dhcp/dhcpd.hosts

# –ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ:
# host deb12-luks-backplane {
#   hardware ethernet bc:fc:e7:3b:54:36;  # ‚Üê MAC –∞–¥—Ä–µ—Å
#   fixed-address 10.19.1.251;            # ‚Üê IP –∞–¥—Ä–µ—Å
#   option host-name "deb12-luks-backplane";
#   next-server 10.19.1.209;
#   filename "ipxe.efi";
# }

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
dhcpd -t -cf /etc/dhcp/dhcpd.conf

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å DHCP
systemctl restart isc-dhcp-server

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
systemctl status isc-dhcp-server
```

**–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –Ω—É–∂–Ω–æ —Ç–∞–∫–∂–µ –æ–±–Ω–æ–≤–∏—Ç—å –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Foreman, –∏–Ω–∞—á–µ –æ–Ω–∏ –º–æ–≥—É—Ç —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è.

---

## üñ•Ô∏è –ó–∞–ø—É—Å–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —á–µ—Ä–µ–∑ iPXE

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Foreman (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –ó–∞–π–¥–∏—Ç–µ –≤ **–£–∑–ª—ã ‚Üí –í—Å–µ —É–∑–ª—ã**
2. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π —Ö–æ—Å—Ç
3. –ù–∞–∂–º–∏—Ç–µ **–í—ã–±—Ä–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ ‚Üí Build**
4. –•–æ—Å—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –∏ –Ω–∞—á–Ω–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### –°–ø–æ—Å–æ–± 2: –í—Ä—É—á–Ω—É—é –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

1. –í–∫–ª—é—á–∏—Ç–µ/–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
2. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–∞–∂–º–∏—Ç–µ `F12` (–∏–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∫–ª–∞–≤–∏—à—É –¥–ª—è PXE boot)
3. –í—ã–±–µ—Ä–∏—Ç–µ **Network Boot** –∏–ª–∏ **PXE Boot**
4. –°–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∏—Ç IP —á–µ—Ä–µ–∑ DHCP –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è —á–µ—Ä–µ–∑ iPXE

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ iPXE

**–ù–∞ Foreman —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ DHCP –≤—ã–¥–∞–ª IP
tail -f /var/log/syslog | grep dhcpd

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∏–¥–Ω–æ:
# DHCPDISCOVER from aa:bb:cc:dd:ee:ff
# DHCPOFFER on 10.19.1.250 to aa:bb:cc:dd:ee:ff
# DHCPREQUEST for 10.19.1.250 from aa:bb:cc:dd:ee:ff
# DHCPACK on 10.19.1.250 to aa:bb:cc:dd:ee:ff

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å TFTP –∑–∞–ø—Ä–æ—Å—ã
tail -f /var/log/syslog | grep tftpd

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å HTTP –∑–∞–ø—Ä–æ—Å—ã (iPXE —Å–∫—Ä–∏–ø—Ç—ã)
tail -f /var/log/foreman-proxy/proxy.log | grep httpboot
```

**–ù–∞ –∫–ª–∏–µ–Ω—Ç–µ (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ —ç–∫—Ä–∞–Ω—É):**

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è iPXE:
```
iPXE initialising devices...
iPXE 1.0.0+ (CERT) -- Open Source Network Boot Firmware
```

---

## üñ±Ô∏è –†–∞–±–æ—Ç–∞ —Å —Ö–æ—Å—Ç–∞–º–∏ –≤ Foreman

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ö–æ—Å—Ç–∞

**–í –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:**

1. **–£–∑–ª—ã ‚Üí –°–æ–∑–¥–∞—Ç—å —É–∑–µ–ª**
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **–ò–º—è**: `host-name.local` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `new-host.local`)
   - **MAC –∞–¥—Ä–µ—Å**: `aa:bb:cc:dd:ee:ff`
   - **IPv4 –∞–¥—Ä–µ—Å**: `10.19.1.252` (—Å–≤–æ–±–æ–¥–Ω—ã–π IP)
   - **–ü–æ–¥—Å–µ—Ç—å**: `Internal Network`
   - **Smart Proxy**: –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à Smart Proxy
   - **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**: `Debian 12.12`
   - **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: `x86_64`
   - **Partition Table**: `Simple Debian 12 LUKS` (–∏–ª–∏ `Simple Debian 12 (no crypto)`)
   - **PXE Loader**: `iPXE UEFI HTTP`

3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã** –∏ –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
   ```
   disk_sys = /dev/disk/by-id/wwn-0xYOUR_WWN
   disk_data = /dev/disk/by-id/wwn-0xYOUR_WWN
   data_mount = /home/storage/local
   crypto_passphrase = TestPassword  # –î–ª—è LUKS
   ```

4. –ù–∞–∂–º–∏—Ç–µ **–ü—Ä–∏–º–µ–Ω–∏—Ç—å**

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ö–æ—Å—Ç–∞

**–í –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:**

1. **–£–∑–ª—ã ‚Üí –í—Å–µ —É–∑–ª—ã ‚Üí –í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Å—Ç ‚Üí –ò–∑–º–µ–Ω–∏—Ç—å**
2. –ò–∑–º–µ–Ω–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
3. –ù–∞–∂–º–∏—Ç–µ **–ü—Ä–∏–º–µ–Ω–∏—Ç—å**

**–í–∞–∂–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã:**
- **–û–±–∑–æ—Ä**: –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**: IP –∏ MAC –∞–¥—Ä–µ—Å–∞
- **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**: OS, Architecture, Partition Table
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤ (`disk_sys`, `crypto_passphrase` –∏ —Ç.–¥.)

### –£–¥–∞–ª–µ–Ω–∏–µ —Ö–æ—Å—Ç–∞

1. **–£–∑–ª—ã ‚Üí –í—Å–µ —É–∑–ª—ã ‚Üí –í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Å—Ç ‚Üí –î–µ–π—Å—Ç–≤–∏—è ‚Üí –£–¥–∞–ª–∏—Ç—å**
2. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ

**‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω–∏–µ —Ö–æ—Å—Ç–∞ –Ω–µ —É–¥–∞–ª–∏—Ç –µ–≥–æ –∏–∑ DHCP –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ù—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –≤—Ä—É—á–Ω—É—é –∏–∑ `/etc/dhcp/dhcpd.hosts` –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å DHCP.

---

## üîÑ –°–µ—Ä–≤–∏—Å—ã –∏ –∏—Ö –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

| –°–µ—Ä–≤–∏—Å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–æ–º–∞–Ω–¥–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ |
|--------|-----------|---------------------|
| `foreman` | –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Foreman | `systemctl restart foreman` |
| `foreman-proxy` | Smart Proxy (DHCP, TFTP, Templates) | `systemctl restart foreman-proxy` |
| `isc-dhcp-server` | DHCP —Å–µ—Ä–≤–µ—Ä | `systemctl restart isc-dhcp-server` |
| `tftpd-hpa` | TFTP —Å–µ—Ä–≤–µ—Ä | `systemctl restart tftpd-hpa` |
| `apache2` | –í–µ–±-—Å–µ—Ä–≤–µ—Ä (Foreman) | `systemctl restart apache2` |

### –ö–æ–≥–¥–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å

#### DHCP (`isc-dhcp-server`)

**–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–≥–¥–∞:**
- –ò–∑–º–µ–Ω–∏–ª–∏ `/etc/dhcp/dhcpd.conf` –∏–ª–∏ `/etc/dhcp/dhcpd.hosts`
- –î–æ–±–∞–≤–∏–ª–∏/—É–¥–∞–ª–∏–ª–∏ —Ö–æ—Å—Ç—ã –≤—Ä—É—á–Ω—É—é
- –ò–∑–º–µ–Ω–∏–ª–∏ IP-–∞–¥—Ä–µ—Å–∞ –∏–ª–∏ MAC-–∞–¥—Ä–µ—Å–∞ –≤—Ä—É—á–Ω—É—é

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º
dhcpd -t -cf /etc/dhcp/dhcpd.conf

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
systemctl restart isc-dhcp-server

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
systemctl status isc-dhcp-server

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
journalctl -u isc-dhcp-server -n 50
```

#### Foreman-proxy

**–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–≥–¥–∞:**
- –ò–∑–º–µ–Ω–∏–ª–∏ `/etc/foreman-proxy/settings.yml` –∏–ª–∏ —Ñ–∞–π–ª—ã –≤ `settings.d/`
- –ò–∑–º–µ–Ω–∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Smart Proxy
- Smart Proxy –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
systemctl restart foreman-proxy

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
systemctl status foreman-proxy

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
tail -f /var/log/foreman-proxy/proxy.log
```

#### Foreman

**–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–≥–¥–∞:**
- –ò–∑–º–µ–Ω–∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –∏ –æ–Ω–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
- Foreman –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∏–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
systemctl restart foreman

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
systemctl status foreman

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
tail -f /var/log/foreman/production.log
```

#### TFTP (`tftpd-hpa`)

**–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–≥–¥–∞:**
- –î–æ–±–∞–≤–∏–ª–∏/–∏–∑–º–µ–Ω–∏–ª–∏ —Ñ–∞–π–ª—ã –≤ `/var/lib/tftpboot/`
- –ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –º–æ–≥—É—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å iPXE –±–∏–Ω–∞—Ä–Ω–∏–∫–∏

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
systemctl restart tftpd-hpa

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
systemctl status tftpd-hpa

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–æ–≤
ls -la /var/lib/tftpboot/
ls -la /var/lib/tftpboot/ipxe.efi
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
systemctl status foreman foreman-proxy isc-dhcp-server tftpd-hpa apache2

# –ò–ª–∏ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏
for service in foreman foreman-proxy isc-dhcp-server tftpd-hpa apache2; do
    echo "=== $service ==="
    systemctl status $service --no-pager -l
done
```

---

## ‚ùå –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏–µ

### 1. –ö–ª–∏–µ–Ω—Ç –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç IP-–∞–¥—Ä–µ—Å

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ö–ª–∏–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –ø–æ —Å–µ—Ç–∏
- –ù–µ—Ç DHCP –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –ª–æ–≥–∞—Ö

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å DHCP
systemctl status isc-dhcp-server

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
dhcpd -t -cf /etc/dhcp/dhcpd.conf

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ DHCP —Å–ª—É—à–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
grep INTERFACES /etc/default/isc-dhcp-server
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: INTERFACESv4="enp1s0"

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
journalctl -u isc-dhcp-server -n 50

# 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å DHCP
systemctl restart isc-dhcp-server
```

**–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ MAC-–∞–¥—Ä–µ—Å —Ö–æ—Å—Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤ Foreman
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ IP-–∞–¥—Ä–µ—Å –Ω–µ –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–¥—Å–µ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è (`10.19.1.0/24`)

---

### 2. iPXE –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (—á–µ—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—Ç –≤ BIOS)

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç IP, –Ω–æ –∑–∞–≤–∏—Å–∞–µ—Ç –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ BIOS
- –ù–∞ —ç–∫—Ä–∞–Ω–µ –≤–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏—è DHCP, –¥–∞–ª—å—à–µ –Ω–∏—á–µ–≥–æ

**–†–µ—à–µ–Ω–∏–µ:**

**–î–ª—è Intel I210 NIC:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –±–∏–Ω–∞—Ä–Ω–∏–∫:
   ```bash
   # –í /etc/dhcp/dhcpd.hosts –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   filename "snponly.efi";  # –î–ª—è Intel I210
   # –∏–ª–∏
   filename "ipxe.efi";     # –î–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö NIC
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞:
   ```bash
   ls -la /var/lib/tftpboot/snponly.efi
   # –ï—Å–ª–∏ –Ω–µ—Ç - —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:
   cp /usr/share/ipxe/snponly.efi /var/lib/tftpboot/
   ```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ DHCP:
   ```bash
   systemctl restart isc-dhcp-server
   ```

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ BIOS:
   - Secure Boot –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–æ—Ç–∫–ª—é—á–µ–Ω**
   - UEFI –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω (–Ω–µ Legacy)
   - PXE Boot –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–µ –∑–∞–≥—Ä—É–∑–∫–∏

**–î–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö NIC:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ipxe.efi` –≤–º–µ—Å—Ç–æ `snponly.efi`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∏–Ω–∞—Ä–Ω–∏–∫ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: `ls -la /var/lib/tftpboot/ipxe.efi`

---

### 3. –û—à–∏–±–∫–∞ "404 Not Found" –¥–ª—è kernel/initrd

**–°–∏–º–ø—Ç–æ–º—ã:**
- iPXE –∑–∞–≥—Ä—É–∑–∏–ª—Å—è, –Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É 404 –¥–ª—è `vmlinuz` –∏–ª–∏ `initrd.gz`

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤
ls -la /var/lib/foreman/public/httpboot/debian12/

# 2. –ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞—Ç—å —Å–∏–º–ª–∏–Ω–∫–∏:
mkdir -p /var/lib/foreman/public/httpboot/debian12
ln -s ../debian12/vmlinuz /var/lib/foreman/public/httpboot/debian12/vmlinuz
ln -s ../debian12/initrd.gz /var/lib/foreman/public/httpboot/debian12/initrd.gz

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
chmod 644 /var/lib/foreman/public/httpboot/debian12/*

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Foreman-proxy
systemctl restart foreman-proxy
```

---

### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∞–µ—Ç –∏–ª–∏ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:**
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è, –Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º —ç—Ç–∞–ø–µ
- –ù–µ—Ç –æ—à–∏–±–æ–∫ –Ω–∞ —ç–∫—Ä–∞–Ω–µ, –ø—Ä–æ—Å—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø):
   ```bash
   # –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ –≤–æ –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
   Alt+F2  # –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –≤—Ç–æ—Ä–æ–π —Ç–µ—Ä–º–∏–Ω–∞–ª
   cat /var/log/syslog | tail -50
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ Foreman —Å–µ—Ä–≤–µ—Ä–µ:
   ```bash
   tail -f /var/log/foreman/production.log
   tail -f /var/log/foreman-proxy/proxy.log
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ö–æ—Å—Ç–∞ –≤ Foreman:
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `disk_sys` –∏ `disk_data` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `crypto_passphrase` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è LUKS)

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Nexus —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
   ```bash
   # –ù–∞ Foreman —Å–µ—Ä–≤–µ—Ä–µ:
   wget http://10.19.1.104:8081/repository/artifacts-local/usr/share/foreman/public/mount_disk.sh
   # –î–æ–ª–∂–µ–Ω —Å–∫–∞—á–∞—Ç—å—Å—è —Ñ–∞–π–ª
   ```

---

### 5. –û—à–∏–±–∫–∞ "No matching physical volumes found"

**–°–∏–º–ø—Ç–æ–º—ã:**
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π –ø—Ä–æ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Ç–æ–º–∞
- –ß–∞—Å—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ LUKS

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `disk_sys` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π:
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `by-id` –ø—É—Ç–∏: `/dev/disk/by-id/wwn-0x...`
   - –ò–ª–∏ –æ–±—ã—á–Ω—ã–µ –ø—É—Ç–∏: `/dev/sda`, `/dev/sdb`

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ö–æ—Å—Ç–∞ –≤ Foreman:
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `crypto_passphrase` –Ω–µ –ø—É—Å—Ç–æ–π (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è LUKS)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `disk_sys` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–∏—Å–∫

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —à–∞–±–ª–æ–Ω –≤ Foreman:
   - **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ ‚Üí Provisioning —à–∞–±–ª–æ–Ω—ã ‚Üí Preseed via PTable (no partman)**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —à–∞–±–ª–æ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

---

### 6. –û—à–∏–±–∫–∞ "parsing config file" –≤ preseed

**–°–∏–º–ø—Ç–æ–º—ã:**
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ "Failed to run preseeded command"

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —à–∞–±–ª–æ–Ω–∞ –≤ Foreman:
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –≤ `late_command` –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –Ω–∞ `\`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   ```bash
   tail -f /var/log/foreman/production.log | grep preseed
   ```

3. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤ —à–∞–±–ª–æ–Ω–µ - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

### 7. –î–∏—Å–∫–∏ –ø–µ—Ä–µ–ø—É—Ç—ã–≤–∞—é—Ç—Å—è (—Å–∏—Å—Ç–µ–º–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–µ –Ω–∞ —Ç–æ—Ç –¥–∏—Å–∫)

**–°–∏–º–ø—Ç–æ–º—ã:**
- –°–∏—Å—Ç–µ–º–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –±–æ–ª—å—à–æ–π –¥–∏—Å–∫ –≤–º–µ—Å—Ç–æ –º–∞–ª–µ–Ω—å–∫–æ–≥–æ
- –î–∞–Ω–Ω—ã–π –¥–∏—Å–∫ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–µ —Ç—É–¥–∞, –∫—É–¥–∞ –Ω—É–∂–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ö–æ—Å—Ç–∞:
   ```
   disk_sys = /dev/disk/by-id/wwn-0xSMALL_DISK    # –ú–∞–ª–µ–Ω—å–∫–∏–π –¥–∏—Å–∫
   disk_data = /dev/disk/by-id/wwn-0xBIG_DISK     # –ë–æ–ª—å—à–æ–π –¥–∏—Å–∫
   ```

2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ `by-id` –ø—É—Ç–∏ –≤–º–µ—Å—Ç–æ `/dev/sda`:
   ```bash
   # –£–∑–Ω–∞—Ç—å by-id –ø—É—Ç–∏:
   ls -l /dev/disk/by-id/ | grep wwn
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —à–∞–±–ª–æ–Ω - —Ç–∞–º –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –¥–∏—Å–∫–∞ –ø–æ —Ä–∞–∑–º–µ—Ä—É

---

## üñ•Ô∏è –ß—Ç–æ –¥–µ–ª–∞—Ç—å –≤ –≤–µ–±–µ, —á—Ç–æ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

### –í –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Foreman (–¥–µ–ª–∞—Ç—å –∑–¥–µ—Å—å):

‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ö–æ—Å—Ç–æ–≤**
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ö–æ—Å—Ç–æ–≤
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ IP/MAC –∞–¥—Ä–µ—Å–æ–≤
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ö–æ—Å—Ç–∞ (`disk_sys`, `crypto_passphrase` –∏ —Ç.–¥.)
   - –ü–µ—Ä–µ–≤–æ–¥ —Ö–æ—Å—Ç–æ–≤ –≤ —Ä–µ–∂–∏–º Build

‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏**
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ provisioning —à–∞–±–ª–æ–Ω–æ–≤
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ –ø–∞—Ä—Ç–∏—Ü–∏–π

‚úÖ **–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∏ —Å—Ç–∞—Ç—É—Å–∞**
   - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ —Ö–æ—Å—Ç–æ–≤
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥—Å–µ—Ç—è–º–∏**
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Å–µ—Ç–µ–π
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DHCP –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤

### –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (–¥–µ–ª–∞—Ç—å –∑–¥–µ—Å—å):

‚úÖ **–†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏**
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ `/etc/dhcp/dhcpd.conf` –∏ `/etc/dhcp/dhcpd.hosts`
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Foreman-proxy
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö DHCP —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–π

‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏**
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ (DHCP, Foreman, Foreman-proxy)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

‚úÖ **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞**
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ñ–∞–π–ª–æ–≤

‚úÖ **–†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏**
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ `/var/lib/tftpboot/`
   - –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–º–ª–∏–Ω–∫–æ–≤ –¥–ª—è HTTPBoot
   - –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ iPXE

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ —Ç–∞–∫–∂–µ –æ–±–Ω–æ–≤–∏—Ç—å –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (1 –º–∏–Ω—É—Ç–∞)

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
systemctl status foreman foreman-proxy isc-dhcp-server tftpd-hpa --no-pager

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
curl -k https://10.19.1.209/ | head -5

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DHCP (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–∫—Ç–∏–≤–µ–Ω)
netstat -ulnp | grep :67

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å TFTP (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–∫—Ç–∏–≤–µ–Ω)
netstat -ulnp | grep :69
```

### –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (5 –º–∏–Ω—É—Ç)

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
echo "=== –°–µ—Ä–≤–∏—Å—ã ==="
for service in foreman foreman-proxy isc-dhcp-server tftpd-hpa apache2; do
    systemctl is-active $service && echo "‚úì $service - OK" || echo "‚úó $service - FAILED"
done

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é DHCP
echo -e "\n=== DHCP Config ==="
dhcpd -t -cf /etc/dhcp/dhcpd.conf && echo "‚úì DHCP config - OK" || echo "‚úó DHCP config - FAILED"

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª—ã iPXE
echo -e "\n=== iPXE Files ==="
for file in ipxe.efi snponly.efi undionly.kpxe autoexec.ipxe; do
    [ -f /var/lib/tftpboot/$file ] && echo "‚úì $file - OK" || echo "‚úó $file - MISSING"
done

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å HTTPBoot —Ñ–∞–π–ª—ã
echo -e "\n=== HTTPBoot Files ==="
for file in vmlinuz initrd.gz; do
    [ -f /var/lib/foreman/public/httpboot/debian12/$file ] && echo "‚úì $file - OK" || echo "‚úó $file - MISSING"
done

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Smart Proxy
echo -e "\n=== Smart Proxy ==="
curl -s http://127.0.0.1:8000/logs | head -1 && echo "‚úì Smart Proxy - OK" || echo "‚úó Smart Proxy - FAILED"
```

### –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ cron)
#!/bin/bash
echo "=== Foreman Status Check ==="
date

# –°–µ—Ä–≤–∏—Å—ã
systemctl status foreman --no-pager | grep Active
systemctl status foreman-proxy --no-pager | grep Active
systemctl status isc-dhcp-server --no-pager | grep Active

# DHCP –∞—Ä–µ–Ω–¥—ã
echo -e "\n=== Active DHCP Leases ==="
cat /var/lib/dhcp/dhcpd.leases | grep -E "^lease 10.19.1" | tail -10

echo -e "\n=== Recent DHCP Activity ==="
tail -20 /var/log/syslog | grep dhcpd | tail -5
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–º–æ—â—å

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ö–æ—Å—Ç–æ–≤
hammer host list

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–¥—Å–µ—Ç–µ–π
hammer subnet list

# –ü—Ä–æ—Å–º–æ—Ç—Ä —à–∞–±–ª–æ–Ω–æ–≤
hammer template list

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Foreman
tail -f /var/log/foreman/production.log

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Foreman-proxy
tail -f /var/log/foreman-proxy/proxy.log

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ DHCP
tail -f /var/log/syslog | grep dhcpd
```

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **Foreman –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: https://theforeman.org/documentation.html
- **Debian Preseed**: https://wiki.debian.org/DebianInstaller/Preseed
- **iPXE –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: https://ipxe.org/start

### –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã

- `/etc/dhcp/dhcpd.conf` - –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è DHCP
- `/etc/dhcp/dhcpd.hosts` - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ DHCP —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏
- `/etc/foreman-proxy/settings.yml` - –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Smart Proxy
- `/var/lib/tftpboot/autoexec.ipxe` - iPXE —Å–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∑–∫–∏
- `/var/lib/tftpboot/ipxe.efi` - iPXE –±–∏–Ω–∞—Ä–Ω–∏–∫ –¥–ª—è UEFI
- `/var/lib/tftpboot/snponly.efi` - iPXE –±–∏–Ω–∞—Ä–Ω–∏–∫ –¥–ª—è Intel I210

---

## üéØ –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –¥–µ–ª

- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ DHCP –≤—ã–¥–∞–µ—Ç IP-–∞–¥—Ä–µ—Å–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ TFTP —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ HTTPBoot —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –∏ –∞–∫—Ç—É–∞–ª—å–Ω–∞
- [ ] –ü–∞—Ä–æ–ª–∏ –∏ –¥–æ—Å—Ç—É–ø—ã –ø–µ—Ä–µ–¥–∞–Ω—ã
- [ ] –ö–æ–ª–ª–µ–≥–∞ –∑–Ω–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- [ ] –ö–æ–ª–ª–µ–≥–∞ –∑–Ω–∞–µ—Ç, –≥–¥–µ –ª–æ–≥–∏
- [ ] –ö–æ–ª–ª–µ–≥–∞ –∑–Ω–∞–µ—Ç, –∫–∞–∫ —Ä–µ—à–∞—Ç—å —Ç–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

---

**–£–¥–∞—á–∏! –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã - –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–ª–∏ –ª–æ–≥–∞–º.**

